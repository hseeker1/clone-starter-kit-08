{"ast":null,"code":"var _classCallCheck = require(\"C:\\\\Users\\\\User\\\\Documents\\\\clone-starter-kit-08\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"C:\\\\Users\\\\User\\\\Documents\\\\clone-starter-kit-08\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/createClass\");\n\n/*\r\n    Copyright 2019 The caver-js Authors\r\n    This file is part of the caver-js library.\r\n\r\n    The caver-js library is free software: you can redistribute it and/or modify\r\n    it under the terms of the GNU Lesser General Public License as published by\r\n    the Free Software Foundation, either version 3 of the License, or\r\n    (at your option) any later version.\r\n\r\n    The caver-js library is distributed in the hope that it will be useful,\r\n    but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\r\n    GNU Lesser General Public License for more details.\r\n\r\n    You should have received a copy of the GNU Lesser General Public License\r\n    along with the caver-js. If not, see <http://www.gnu.org/licenses/>.\r\n*/\nvar isValidRole = require('../../../../caver-utils').isValidRole;\n\nvar isValidPublicKey = require('../../../../caver-utils').isValidPublicKey;\n\nvar AccountForUpdate = /*#__PURE__*/function () {\n  \"use strict\";\n\n  function AccountForUpdate(address, keyForUpdate, options) {\n    _classCallCheck(this, AccountForUpdate);\n\n    this.address = address;\n    this.keyForUpdate = keyFormatter(keyForUpdate, options);\n  }\n\n  _createClass(AccountForUpdate, [{\n    key: \"fillUpdateObject\",\n    value: function fillUpdateObject(updateObject) {\n      delete updateObject.key;\n      Object.assign(updateObject, this.keyForUpdate);\n    }\n  }]);\n\n  return AccountForUpdate;\n}();\n\nfunction keyFormatter(keyForUpdate, options) {\n  var keyObject = {};\n\n  if (typeof keyForUpdate === 'string') {\n    if (options) throw new Error('Failed to keyFormatter for AccountForUpdate: AccountKeyPublic/legacyKey/failKey cannot have options');\n\n    switch (keyForUpdate) {\n      case 'legacyKey':\n        keyObject.legacyKey = true;\n        break;\n\n      case 'failKey':\n        keyObject.failKey = true;\n        break;\n\n      default:\n        if (!isValidPublicKey(keyForUpdate)) throw new Error('Invalid public key');\n        keyObject.publicKey = keyForUpdate;\n        break;\n    }\n  } else if (Array.isArray(keyForUpdate)) {\n    if (!options || !options.threshold || !options.weight) throw new Error('For AccountKeyMultiSig, threshold and weight should be defined in options object.');\n    if (!Array.isArray(options.weight)) throw new Error('The weight should be defined as a array.');\n    if (options.weight.length !== keyForUpdate.length) throw new Error('The length of keys in AccountKeyMultiSig and the length of weight array do not match.');\n    keyObject.multisig = {\n      threshold: options.threshold,\n      keys: []\n    };\n    var weightSum = 0;\n\n    for (var i = 0; i < keyForUpdate.length; i++) {\n      var key = keyForUpdate[i];\n      if (!isValidPublicKey(key)) throw new Error('Invalid public key');\n      keyObject.multisig.keys.push({\n        weight: options.weight[i],\n        publicKey: key\n      });\n      weightSum += options.weight[i];\n    }\n\n    if (weightSum < options.threshold) throw new Error('Invalid options for AccountKeyMultiSig: The sum of weights is less than the threshold.');\n  } else {\n    for (var _key in keyForUpdate) {\n      if (!isValidRole(_key)) throw new Error(\"Invalid role is defined: \".concat(_key));\n      options = options || {};\n\n      if (_key === 'transactionKey') {\n        keyObject.roleTransactionKey = keyFormatter(keyForUpdate[_key], options.transactionKey);\n      }\n\n      if (_key === 'updateKey') {\n        keyObject.roleAccountUpdateKey = keyFormatter(keyForUpdate[_key], options.updateKey);\n      }\n\n      if (_key === 'feePayerKey') {\n        keyObject.roleFeePayerKey = keyFormatter(keyForUpdate[_key], options.feePayerKey);\n      }\n    }\n  }\n\n  return keyObject;\n}\n\nmodule.exports = AccountForUpdate;","map":{"version":3,"names":["isValidRole","require","isValidPublicKey","AccountForUpdate","address","keyForUpdate","options","keyFormatter","updateObject","key","Object","assign","keyObject","Error","legacyKey","failKey","publicKey","Array","isArray","threshold","weight","length","multisig","keys","weightSum","i","push","roleTransactionKey","transactionKey","roleAccountUpdateKey","updateKey","roleFeePayerKey","feePayerKey","module","exports"],"sources":["C:/Users/User/Documents/clone-starter-kit-08/node_modules/caver-js/packages/caver-klay/caver-klay-accounts/src/account/accountForUpdate.js"],"sourcesContent":["/*\r\n    Copyright 2019 The caver-js Authors\r\n    This file is part of the caver-js library.\r\n\r\n    The caver-js library is free software: you can redistribute it and/or modify\r\n    it under the terms of the GNU Lesser General Public License as published by\r\n    the Free Software Foundation, either version 3 of the License, or\r\n    (at your option) any later version.\r\n\r\n    The caver-js library is distributed in the hope that it will be useful,\r\n    but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\r\n    GNU Lesser General Public License for more details.\r\n\r\n    You should have received a copy of the GNU Lesser General Public License\r\n    along with the caver-js. If not, see <http://www.gnu.org/licenses/>.\r\n*/\r\n\r\nconst isValidRole = require('../../../../caver-utils').isValidRole\r\nconst isValidPublicKey = require('../../../../caver-utils').isValidPublicKey\r\n\r\nclass AccountForUpdate {\r\n    constructor(address, keyForUpdate, options) {\r\n        this.address = address\r\n        this.keyForUpdate = keyFormatter(keyForUpdate, options)\r\n    }\r\n\r\n    fillUpdateObject(updateObject) {\r\n        delete updateObject.key\r\n        Object.assign(updateObject, this.keyForUpdate)\r\n    }\r\n}\r\n\r\nfunction keyFormatter(keyForUpdate, options) {\r\n    const keyObject = {}\r\n\r\n    if (typeof keyForUpdate === 'string') {\r\n        if (options) throw new Error('Failed to keyFormatter for AccountForUpdate: AccountKeyPublic/legacyKey/failKey cannot have options')\r\n        switch (keyForUpdate) {\r\n            case 'legacyKey':\r\n                keyObject.legacyKey = true\r\n                break\r\n            case 'failKey':\r\n                keyObject.failKey = true\r\n                break\r\n            default:\r\n                if (!isValidPublicKey(keyForUpdate)) throw new Error('Invalid public key')\r\n                keyObject.publicKey = keyForUpdate\r\n                break\r\n        }\r\n    } else if (Array.isArray(keyForUpdate)) {\r\n        if (!options || !options.threshold || !options.weight)\r\n            throw new Error('For AccountKeyMultiSig, threshold and weight should be defined in options object.')\r\n        if (!Array.isArray(options.weight)) throw new Error('The weight should be defined as a array.')\r\n        if (options.weight.length !== keyForUpdate.length)\r\n            throw new Error('The length of keys in AccountKeyMultiSig and the length of weight array do not match.')\r\n\r\n        keyObject.multisig = {\r\n            threshold: options.threshold,\r\n            keys: [],\r\n        }\r\n\r\n        let weightSum = 0\r\n\r\n        for (let i = 0; i < keyForUpdate.length; i++) {\r\n            const key = keyForUpdate[i]\r\n            if (!isValidPublicKey(key)) throw new Error('Invalid public key')\r\n            keyObject.multisig.keys.push({\r\n                weight: options.weight[i],\r\n                publicKey: key,\r\n            })\r\n            weightSum += options.weight[i]\r\n        }\r\n\r\n        if (weightSum < options.threshold)\r\n            throw new Error('Invalid options for AccountKeyMultiSig: The sum of weights is less than the threshold.')\r\n    } else {\r\n        for (const key in keyForUpdate) {\r\n            if (!isValidRole(key)) throw new Error(`Invalid role is defined: ${key}`)\r\n            options = options || {}\r\n            if (key === 'transactionKey') {\r\n                keyObject.roleTransactionKey = keyFormatter(keyForUpdate[key], options.transactionKey)\r\n            }\r\n            if (key === 'updateKey') {\r\n                keyObject.roleAccountUpdateKey = keyFormatter(keyForUpdate[key], options.updateKey)\r\n            }\r\n            if (key === 'feePayerKey') {\r\n                keyObject.roleFeePayerKey = keyFormatter(keyForUpdate[key], options.feePayerKey)\r\n            }\r\n        }\r\n    }\r\n\r\n    return keyObject\r\n}\r\n\r\nmodule.exports = AccountForUpdate\r\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}