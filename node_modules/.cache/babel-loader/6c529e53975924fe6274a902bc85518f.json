{"ast":null,"code":"/*\r\n    Modifications copyright 2018 The caver-js Authors\r\n    This file is part of web3.js.\r\n\r\n    web3.js is free software: you can redistribute it and/or modify\r\n    it under the terms of the GNU Lesser General Public License as published by\r\n    the Free Software Foundation, either version 3 of the License, or\r\n    (at your option) any later version.\r\n\r\n    web3.js is distributed in the hope that it will be useful,\r\n    but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n    GNU Lesser General Public License for more details.\r\n\r\n    You should have received a copy of the GNU Lesser General Public License\r\n    along with web3.js.  If not, see <http://www.gnu.org/licenses/>.\r\n\r\n    This file is derived from web3.js/packages/web3-providers-ipc/src/index.js (2019/06/12).\r\n    Modified and improved for the caver-js development.\r\n*/\n\n/** @file index.js\r\n * @authors:\r\n *   Fabian Vogelsteller <fabian@ethereum.org>\r\n * @date 2017\r\n */\nvar _ = require('lodash');\n\nvar oboe = require('oboe');\n\nvar errors = require('../../../caver-core-helpers').errors;\n\nvar IpcProvider = function IpcProvider(path, net) {\n  var _this = this;\n\n  this.responseCallbacks = {};\n  this.notificationCallbacks = [];\n  this.path = path;\n  this.connection = net.connect({\n    path: this.path\n  });\n  this.addDefaultEvents(); // LISTEN FOR CONNECTION RESPONSES\n\n  var callback = function callback(result) {\n    var id = null; // get the id which matches the returned id\n\n    if (_.isArray(result)) {\n      result.forEach(function (load) {\n        if (_this.responseCallbacks[load.id]) {\n          id = load.id;\n        }\n      });\n    } else {\n      id = result.id;\n    } // notification\n\n\n    if (!id && result.method.indexOf('_subscription') !== -1) {\n      _this.notificationCallbacks.forEach(function (cb) {\n        if (_.isFunction(cb)) {\n          cb(result);\n        }\n      }); // fire the callback\n\n    } else if (_this.responseCallbacks[id]) {\n      _this.responseCallbacks[id](null, result);\n\n      delete _this.responseCallbacks[id];\n    }\n  }; // use oboe.js for Sockets\n\n\n  if (net.constructor.name === 'Socket') {\n    oboe(this.connection).done(callback);\n  } else {\n    this.connection.on('data', function (data) {\n      _this._parseResponse(data.toString()).forEach(callback);\n    });\n  }\n};\n/**\r\nWill add the error and end event to timeout existing calls\r\n\r\n@method addDefaultEvents\r\n*/\n\n\nIpcProvider.prototype.addDefaultEvents = function () {\n  var _this = this;\n\n  this.connection.on('connect', function () {});\n  this.connection.on('error', function () {\n    _this._timeout();\n  });\n  this.connection.on('end', function () {\n    _this._timeout();\n  });\n  this.connection.on('timeout', function () {\n    _this._timeout();\n  });\n};\n/**\r\n Will parse the response and make an array out of it.\r\n\r\n NOTE, this exists for backwards compatibility reasons.\r\n\r\n @method _parseResponse\r\n @param {String} data\r\n */\n\n\nIpcProvider.prototype._parseResponse = function (data) {\n  var _this = this;\n\n  var returnValues = []; // DE-CHUNKER\n\n  var dechunkedData = data.replace(/\\}[\\n\\r]?\\{/g, '}|--|{') // }{\n  .replace(/\\}\\][\\n\\r]?\\[\\{/g, '}]|--|[{') // }][{\n  .replace(/\\}[\\n\\r]?\\[\\{/g, '}|--|[{') // }[{\n  .replace(/\\}\\][\\n\\r]?\\{/g, '}]|--|{') // }]{\n  .split('|--|');\n  dechunkedData.forEach(function (d) {\n    // prepend the last chunk\n    if (_this.lastChunk) {\n      d = _this.lastChunk + d;\n    }\n\n    var result = null;\n\n    try {\n      result = JSON.parse(d);\n    } catch (e) {\n      _this.lastChunk = d; // start timeout to cancel all requests\n\n      clearTimeout(_this.lastChunkTimeout);\n      _this.lastChunkTimeout = setTimeout(function () {\n        _this._timeout();\n\n        throw errors.InvalidResponse(d);\n      }, 1000 * 15);\n      return;\n    } // cancel timeout and set chunk to null\n\n\n    clearTimeout(_this.lastChunkTimeout);\n    _this.lastChunk = null;\n\n    if (result) {\n      returnValues.push(result);\n    }\n  });\n  return returnValues;\n};\n/**\r\nGet the adds a callback to the responseCallbacks object,\r\nwhich will be called if a response matching the response Id will arrive.\r\n\r\n@method _addResponseCallback\r\n*/\n\n\nIpcProvider.prototype._addResponseCallback = function (payload, callback) {\n  var id = payload.id || payload[0].id;\n  var method = payload.method || payload[0].method;\n  this.responseCallbacks[id] = callback;\n  this.responseCallbacks[id].method = method;\n};\n/**\r\nTimeout all requests when the end/error event is fired\r\n\r\n@method _timeout\r\n*/\n\n\nIpcProvider.prototype._timeout = function () {\n  for (var key in this.responseCallbacks) {\n    if (Object.prototype.hasOwnProperty.call(this.responseCallbacks, key)) {\n      this.responseCallbacks[key](errors.InvalidConnection('on IPC'));\n      delete this.responseCallbacks[key];\n    }\n  }\n};\n/**\r\n Try to reconnect\r\n\r\n @method reconnect\r\n */\n\n\nIpcProvider.prototype.reconnect = function () {\n  this.connection.connect({\n    path: this.path\n  });\n};\n\nIpcProvider.prototype.send = function (payload, callback) {\n  // try reconnect, when connection is gone\n  if (!this.connection.writable) {\n    this.connection.connect({\n      path: this.path\n    });\n  }\n\n  this.connection.write(JSON.stringify(payload));\n\n  this._addResponseCallback(payload, callback);\n};\n/**\r\nSubscribes to provider events.provider\r\n\r\n@method on\r\n@param {String} type    'notification', 'connect', 'error', 'end' or 'data'\r\n@param {Function} callback   the callback to call\r\n*/\n\n\nIpcProvider.prototype.on = function (type, callback) {\n  if (typeof callback !== 'function') {\n    throw new Error('The second parameter callback must be a function.');\n  }\n\n  switch (type) {\n    case 'data':\n      this.notificationCallbacks.push(callback);\n      break;\n    // adds error, end, timeout, connect\n\n    default:\n      this.connection.on(type, callback);\n      break;\n  }\n};\n/**\r\n Subscribes to provider events.provider\r\n\r\n @method on\r\n @param {String} type    'connect', 'error', 'end' or 'data'\r\n @param {Function} callback   the callback to call\r\n */\n\n\nIpcProvider.prototype.once = function (type, callback) {\n  if (typeof callback !== 'function') {\n    throw new Error('The second parameter callback must be a function.');\n  }\n\n  this.connection.once(type, callback);\n};\n/**\r\nRemoves event listener\r\n\r\n@method removeListener\r\n@param {String} type    'data', 'connect', 'error', 'end' or 'data'\r\n@param {Function} callback   the callback to call\r\n*/\n\n\nIpcProvider.prototype.removeListener = function (type, callback) {\n  var _this = this;\n\n  switch (type) {\n    case 'data':\n      this.notificationCallbacks.forEach(function (cb, index) {\n        if (cb === callback) {\n          _this.notificationCallbacks.splice(index, 1);\n        }\n      });\n      break;\n\n    default:\n      this.connection.removeListener(type, callback);\n      break;\n  }\n};\n/**\r\nRemoves all event listeners\r\n\r\n@method removeAllListeners\r\n@param {String} type    'data', 'connect', 'error', 'end' or 'data'\r\n*/\n\n\nIpcProvider.prototype.removeAllListeners = function (type) {\n  switch (type) {\n    case 'data':\n      this.notificationCallbacks = [];\n      break;\n\n    default:\n      this.connection.removeAllListeners(type);\n      break;\n  }\n};\n/**\r\nResets the providers, clears all callbacks\r\n\r\n@method reset\r\n*/\n\n\nIpcProvider.prototype.reset = function () {\n  this._timeout();\n\n  this.notificationCallbacks = [];\n  this.connection.removeAllListeners('error');\n  this.connection.removeAllListeners('end');\n  this.connection.removeAllListeners('timeout');\n  this.addDefaultEvents();\n};\n\nIpcProvider.prototype.supportsSubscriptions = function () {\n  return true;\n};\n\nmodule.exports = IpcProvider;","map":{"version":3,"names":["_","require","oboe","errors","IpcProvider","path","net","_this","responseCallbacks","notificationCallbacks","connection","connect","addDefaultEvents","callback","result","id","isArray","forEach","load","method","indexOf","cb","isFunction","constructor","name","done","on","data","_parseResponse","toString","prototype","_timeout","returnValues","dechunkedData","replace","split","d","lastChunk","JSON","parse","e","clearTimeout","lastChunkTimeout","setTimeout","InvalidResponse","push","_addResponseCallback","payload","key","Object","hasOwnProperty","call","InvalidConnection","reconnect","send","writable","write","stringify","type","Error","once","removeListener","index","splice","removeAllListeners","reset","supportsSubscriptions","module","exports"],"sources":["C:/Users/User/Documents/clone-starter-kit-08/node_modules/caver-js/packages/caver-core-requestmanager/caver-providers-ipc/src/index.js"],"sourcesContent":["/*\r\n    Modifications copyright 2018 The caver-js Authors\r\n    This file is part of web3.js.\r\n\r\n    web3.js is free software: you can redistribute it and/or modify\r\n    it under the terms of the GNU Lesser General Public License as published by\r\n    the Free Software Foundation, either version 3 of the License, or\r\n    (at your option) any later version.\r\n\r\n    web3.js is distributed in the hope that it will be useful,\r\n    but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n    GNU Lesser General Public License for more details.\r\n\r\n    You should have received a copy of the GNU Lesser General Public License\r\n    along with web3.js.  If not, see <http://www.gnu.org/licenses/>.\r\n\r\n    This file is derived from web3.js/packages/web3-providers-ipc/src/index.js (2019/06/12).\r\n    Modified and improved for the caver-js development.\r\n*/\r\n/** @file index.js\r\n * @authors:\r\n *   Fabian Vogelsteller <fabian@ethereum.org>\r\n * @date 2017\r\n */\r\n\r\nconst _ = require('lodash')\r\nconst oboe = require('oboe')\r\nconst errors = require('../../../caver-core-helpers').errors\r\n\r\nconst IpcProvider = function IpcProvider(path, net) {\r\n    const _this = this\r\n    this.responseCallbacks = {}\r\n    this.notificationCallbacks = []\r\n    this.path = path\r\n\r\n    this.connection = net.connect({ path: this.path })\r\n\r\n    this.addDefaultEvents()\r\n\r\n    // LISTEN FOR CONNECTION RESPONSES\r\n    const callback = function(result) {\r\n        let id = null\r\n\r\n        // get the id which matches the returned id\r\n        if (_.isArray(result)) {\r\n            result.forEach(function(load) {\r\n                if (_this.responseCallbacks[load.id]) {\r\n                    id = load.id\r\n                }\r\n            })\r\n        } else {\r\n            id = result.id\r\n        }\r\n\r\n        // notification\r\n        if (!id && result.method.indexOf('_subscription') !== -1) {\r\n            _this.notificationCallbacks.forEach(function(cb) {\r\n                if (_.isFunction(cb)) {\r\n                    cb(result)\r\n                }\r\n            })\r\n\r\n            // fire the callback\r\n        } else if (_this.responseCallbacks[id]) {\r\n            _this.responseCallbacks[id](null, result)\r\n            delete _this.responseCallbacks[id]\r\n        }\r\n    }\r\n\r\n    // use oboe.js for Sockets\r\n    if (net.constructor.name === 'Socket') {\r\n        oboe(this.connection).done(callback)\r\n    } else {\r\n        this.connection.on('data', function(data) {\r\n            _this._parseResponse(data.toString()).forEach(callback)\r\n        })\r\n    }\r\n}\r\n\r\n/**\r\nWill add the error and end event to timeout existing calls\r\n\r\n@method addDefaultEvents\r\n*/\r\nIpcProvider.prototype.addDefaultEvents = function() {\r\n    const _this = this\r\n\r\n    this.connection.on('connect', function() {})\r\n\r\n    this.connection.on('error', function() {\r\n        _this._timeout()\r\n    })\r\n\r\n    this.connection.on('end', function() {\r\n        _this._timeout()\r\n    })\r\n\r\n    this.connection.on('timeout', function() {\r\n        _this._timeout()\r\n    })\r\n}\r\n\r\n/**\r\n Will parse the response and make an array out of it.\r\n\r\n NOTE, this exists for backwards compatibility reasons.\r\n\r\n @method _parseResponse\r\n @param {String} data\r\n */\r\nIpcProvider.prototype._parseResponse = function(data) {\r\n    const _this = this\r\n    const returnValues = []\r\n\r\n    // DE-CHUNKER\r\n    const dechunkedData = data\r\n        .replace(/\\}[\\n\\r]?\\{/g, '}|--|{') // }{\r\n        .replace(/\\}\\][\\n\\r]?\\[\\{/g, '}]|--|[{') // }][{\r\n        .replace(/\\}[\\n\\r]?\\[\\{/g, '}|--|[{') // }[{\r\n        .replace(/\\}\\][\\n\\r]?\\{/g, '}]|--|{') // }]{\r\n        .split('|--|')\r\n\r\n    dechunkedData.forEach(function(d) {\r\n        // prepend the last chunk\r\n        if (_this.lastChunk) {\r\n            d = _this.lastChunk + d\r\n        }\r\n\r\n        let result = null\r\n\r\n        try {\r\n            result = JSON.parse(d)\r\n        } catch (e) {\r\n            _this.lastChunk = d\r\n\r\n            // start timeout to cancel all requests\r\n            clearTimeout(_this.lastChunkTimeout)\r\n            _this.lastChunkTimeout = setTimeout(function() {\r\n                _this._timeout()\r\n                throw errors.InvalidResponse(d)\r\n            }, 1000 * 15)\r\n\r\n            return\r\n        }\r\n\r\n        // cancel timeout and set chunk to null\r\n        clearTimeout(_this.lastChunkTimeout)\r\n        _this.lastChunk = null\r\n\r\n        if (result) {\r\n            returnValues.push(result)\r\n        }\r\n    })\r\n\r\n    return returnValues\r\n}\r\n\r\n/**\r\nGet the adds a callback to the responseCallbacks object,\r\nwhich will be called if a response matching the response Id will arrive.\r\n\r\n@method _addResponseCallback\r\n*/\r\nIpcProvider.prototype._addResponseCallback = function(payload, callback) {\r\n    const id = payload.id || payload[0].id\r\n    const method = payload.method || payload[0].method\r\n\r\n    this.responseCallbacks[id] = callback\r\n    this.responseCallbacks[id].method = method\r\n}\r\n\r\n/**\r\nTimeout all requests when the end/error event is fired\r\n\r\n@method _timeout\r\n*/\r\nIpcProvider.prototype._timeout = function() {\r\n    for (const key in this.responseCallbacks) {\r\n        if (Object.prototype.hasOwnProperty.call(this.responseCallbacks, key)) {\r\n            this.responseCallbacks[key](errors.InvalidConnection('on IPC'))\r\n            delete this.responseCallbacks[key]\r\n        }\r\n    }\r\n}\r\n\r\n/**\r\n Try to reconnect\r\n\r\n @method reconnect\r\n */\r\nIpcProvider.prototype.reconnect = function() {\r\n    this.connection.connect({ path: this.path })\r\n}\r\n\r\nIpcProvider.prototype.send = function(payload, callback) {\r\n    // try reconnect, when connection is gone\r\n    if (!this.connection.writable) {\r\n        this.connection.connect({ path: this.path })\r\n    }\r\n\r\n    this.connection.write(JSON.stringify(payload))\r\n    this._addResponseCallback(payload, callback)\r\n}\r\n\r\n/**\r\nSubscribes to provider events.provider\r\n\r\n@method on\r\n@param {String} type    'notification', 'connect', 'error', 'end' or 'data'\r\n@param {Function} callback   the callback to call\r\n*/\r\nIpcProvider.prototype.on = function(type, callback) {\r\n    if (typeof callback !== 'function') {\r\n        throw new Error('The second parameter callback must be a function.')\r\n    }\r\n\r\n    switch (type) {\r\n        case 'data':\r\n            this.notificationCallbacks.push(callback)\r\n            break\r\n\r\n        // adds error, end, timeout, connect\r\n        default:\r\n            this.connection.on(type, callback)\r\n            break\r\n    }\r\n}\r\n\r\n/**\r\n Subscribes to provider events.provider\r\n\r\n @method on\r\n @param {String} type    'connect', 'error', 'end' or 'data'\r\n @param {Function} callback   the callback to call\r\n */\r\nIpcProvider.prototype.once = function(type, callback) {\r\n    if (typeof callback !== 'function') {\r\n        throw new Error('The second parameter callback must be a function.')\r\n    }\r\n\r\n    this.connection.once(type, callback)\r\n}\r\n\r\n/**\r\nRemoves event listener\r\n\r\n@method removeListener\r\n@param {String} type    'data', 'connect', 'error', 'end' or 'data'\r\n@param {Function} callback   the callback to call\r\n*/\r\nIpcProvider.prototype.removeListener = function(type, callback) {\r\n    const _this = this\r\n\r\n    switch (type) {\r\n        case 'data':\r\n            this.notificationCallbacks.forEach(function(cb, index) {\r\n                if (cb === callback) {\r\n                    _this.notificationCallbacks.splice(index, 1)\r\n                }\r\n            })\r\n            break\r\n\r\n        default:\r\n            this.connection.removeListener(type, callback)\r\n            break\r\n    }\r\n}\r\n\r\n/**\r\nRemoves all event listeners\r\n\r\n@method removeAllListeners\r\n@param {String} type    'data', 'connect', 'error', 'end' or 'data'\r\n*/\r\nIpcProvider.prototype.removeAllListeners = function(type) {\r\n    switch (type) {\r\n        case 'data':\r\n            this.notificationCallbacks = []\r\n            break\r\n\r\n        default:\r\n            this.connection.removeAllListeners(type)\r\n            break\r\n    }\r\n}\r\n\r\n/**\r\nResets the providers, clears all callbacks\r\n\r\n@method reset\r\n*/\r\nIpcProvider.prototype.reset = function() {\r\n    this._timeout()\r\n    this.notificationCallbacks = []\r\n\r\n    this.connection.removeAllListeners('error')\r\n    this.connection.removeAllListeners('end')\r\n    this.connection.removeAllListeners('timeout')\r\n\r\n    this.addDefaultEvents()\r\n}\r\n\r\nIpcProvider.prototype.supportsSubscriptions = function() {\r\n    return true\r\n}\r\n\r\nmodule.exports = IpcProvider\r\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA;AACA;AACA;AACA;AACA;AAEA,IAAMA,CAAC,GAAGC,OAAO,CAAC,QAAD,CAAjB;;AACA,IAAMC,IAAI,GAAGD,OAAO,CAAC,MAAD,CAApB;;AACA,IAAME,MAAM,GAAGF,OAAO,CAAC,6BAAD,CAAP,CAAuCE,MAAtD;;AAEA,IAAMC,WAAW,GAAG,SAASA,WAAT,CAAqBC,IAArB,EAA2BC,GAA3B,EAAgC;EAChD,IAAMC,KAAK,GAAG,IAAd;;EACA,KAAKC,iBAAL,GAAyB,EAAzB;EACA,KAAKC,qBAAL,GAA6B,EAA7B;EACA,KAAKJ,IAAL,GAAYA,IAAZ;EAEA,KAAKK,UAAL,GAAkBJ,GAAG,CAACK,OAAJ,CAAY;IAAEN,IAAI,EAAE,KAAKA;EAAb,CAAZ,CAAlB;EAEA,KAAKO,gBAAL,GARgD,CAUhD;;EACA,IAAMC,QAAQ,GAAG,SAAXA,QAAW,CAASC,MAAT,EAAiB;IAC9B,IAAIC,EAAE,GAAG,IAAT,CAD8B,CAG9B;;IACA,IAAIf,CAAC,CAACgB,OAAF,CAAUF,MAAV,CAAJ,EAAuB;MACnBA,MAAM,CAACG,OAAP,CAAe,UAASC,IAAT,EAAe;QAC1B,IAAIX,KAAK,CAACC,iBAAN,CAAwBU,IAAI,CAACH,EAA7B,CAAJ,EAAsC;UAClCA,EAAE,GAAGG,IAAI,CAACH,EAAV;QACH;MACJ,CAJD;IAKH,CAND,MAMO;MACHA,EAAE,GAAGD,MAAM,CAACC,EAAZ;IACH,CAZ6B,CAc9B;;;IACA,IAAI,CAACA,EAAD,IAAOD,MAAM,CAACK,MAAP,CAAcC,OAAd,CAAsB,eAAtB,MAA2C,CAAC,CAAvD,EAA0D;MACtDb,KAAK,CAACE,qBAAN,CAA4BQ,OAA5B,CAAoC,UAASI,EAAT,EAAa;QAC7C,IAAIrB,CAAC,CAACsB,UAAF,CAAaD,EAAb,CAAJ,EAAsB;UAClBA,EAAE,CAACP,MAAD,CAAF;QACH;MACJ,CAJD,EADsD,CAOtD;;IACH,CARD,MAQO,IAAIP,KAAK,CAACC,iBAAN,CAAwBO,EAAxB,CAAJ,EAAiC;MACpCR,KAAK,CAACC,iBAAN,CAAwBO,EAAxB,EAA4B,IAA5B,EAAkCD,MAAlC;;MACA,OAAOP,KAAK,CAACC,iBAAN,CAAwBO,EAAxB,CAAP;IACH;EACJ,CA3BD,CAXgD,CAwChD;;;EACA,IAAIT,GAAG,CAACiB,WAAJ,CAAgBC,IAAhB,KAAyB,QAA7B,EAAuC;IACnCtB,IAAI,CAAC,KAAKQ,UAAN,CAAJ,CAAsBe,IAAtB,CAA2BZ,QAA3B;EACH,CAFD,MAEO;IACH,KAAKH,UAAL,CAAgBgB,EAAhB,CAAmB,MAAnB,EAA2B,UAASC,IAAT,EAAe;MACtCpB,KAAK,CAACqB,cAAN,CAAqBD,IAAI,CAACE,QAAL,EAArB,EAAsCZ,OAAtC,CAA8CJ,QAA9C;IACH,CAFD;EAGH;AACJ,CAhDD;AAkDA;AACA;AACA;AACA;AACA;;;AACAT,WAAW,CAAC0B,SAAZ,CAAsBlB,gBAAtB,GAAyC,YAAW;EAChD,IAAML,KAAK,GAAG,IAAd;;EAEA,KAAKG,UAAL,CAAgBgB,EAAhB,CAAmB,SAAnB,EAA8B,YAAW,CAAE,CAA3C;EAEA,KAAKhB,UAAL,CAAgBgB,EAAhB,CAAmB,OAAnB,EAA4B,YAAW;IACnCnB,KAAK,CAACwB,QAAN;EACH,CAFD;EAIA,KAAKrB,UAAL,CAAgBgB,EAAhB,CAAmB,KAAnB,EAA0B,YAAW;IACjCnB,KAAK,CAACwB,QAAN;EACH,CAFD;EAIA,KAAKrB,UAAL,CAAgBgB,EAAhB,CAAmB,SAAnB,EAA8B,YAAW;IACrCnB,KAAK,CAACwB,QAAN;EACH,CAFD;AAGH,CAhBD;AAkBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA3B,WAAW,CAAC0B,SAAZ,CAAsBF,cAAtB,GAAuC,UAASD,IAAT,EAAe;EAClD,IAAMpB,KAAK,GAAG,IAAd;;EACA,IAAMyB,YAAY,GAAG,EAArB,CAFkD,CAIlD;;EACA,IAAMC,aAAa,GAAGN,IAAI,CACrBO,OADiB,CACT,cADS,EACO,QADP,EACiB;EADjB,CAEjBA,OAFiB,CAET,kBAFS,EAEW,UAFX,EAEuB;EAFvB,CAGjBA,OAHiB,CAGT,gBAHS,EAGS,SAHT,EAGoB;EAHpB,CAIjBA,OAJiB,CAIT,gBAJS,EAIS,SAJT,EAIoB;EAJpB,CAKjBC,KALiB,CAKX,MALW,CAAtB;EAOAF,aAAa,CAAChB,OAAd,CAAsB,UAASmB,CAAT,EAAY;IAC9B;IACA,IAAI7B,KAAK,CAAC8B,SAAV,EAAqB;MACjBD,CAAC,GAAG7B,KAAK,CAAC8B,SAAN,GAAkBD,CAAtB;IACH;;IAED,IAAItB,MAAM,GAAG,IAAb;;IAEA,IAAI;MACAA,MAAM,GAAGwB,IAAI,CAACC,KAAL,CAAWH,CAAX,CAAT;IACH,CAFD,CAEE,OAAOI,CAAP,EAAU;MACRjC,KAAK,CAAC8B,SAAN,GAAkBD,CAAlB,CADQ,CAGR;;MACAK,YAAY,CAAClC,KAAK,CAACmC,gBAAP,CAAZ;MACAnC,KAAK,CAACmC,gBAAN,GAAyBC,UAAU,CAAC,YAAW;QAC3CpC,KAAK,CAACwB,QAAN;;QACA,MAAM5B,MAAM,CAACyC,eAAP,CAAuBR,CAAvB,CAAN;MACH,CAHkC,EAGhC,OAAO,EAHyB,CAAnC;MAKA;IACH,CArB6B,CAuB9B;;;IACAK,YAAY,CAAClC,KAAK,CAACmC,gBAAP,CAAZ;IACAnC,KAAK,CAAC8B,SAAN,GAAkB,IAAlB;;IAEA,IAAIvB,MAAJ,EAAY;MACRkB,YAAY,CAACa,IAAb,CAAkB/B,MAAlB;IACH;EACJ,CA9BD;EAgCA,OAAOkB,YAAP;AACH,CA7CD;AA+CA;AACA;AACA;AACA;AACA;AACA;;;AACA5B,WAAW,CAAC0B,SAAZ,CAAsBgB,oBAAtB,GAA6C,UAASC,OAAT,EAAkBlC,QAAlB,EAA4B;EACrE,IAAME,EAAE,GAAGgC,OAAO,CAAChC,EAAR,IAAcgC,OAAO,CAAC,CAAD,CAAP,CAAWhC,EAApC;EACA,IAAMI,MAAM,GAAG4B,OAAO,CAAC5B,MAAR,IAAkB4B,OAAO,CAAC,CAAD,CAAP,CAAW5B,MAA5C;EAEA,KAAKX,iBAAL,CAAuBO,EAAvB,IAA6BF,QAA7B;EACA,KAAKL,iBAAL,CAAuBO,EAAvB,EAA2BI,MAA3B,GAAoCA,MAApC;AACH,CAND;AAQA;AACA;AACA;AACA;AACA;;;AACAf,WAAW,CAAC0B,SAAZ,CAAsBC,QAAtB,GAAiC,YAAW;EACxC,KAAK,IAAMiB,GAAX,IAAkB,KAAKxC,iBAAvB,EAA0C;IACtC,IAAIyC,MAAM,CAACnB,SAAP,CAAiBoB,cAAjB,CAAgCC,IAAhC,CAAqC,KAAK3C,iBAA1C,EAA6DwC,GAA7D,CAAJ,EAAuE;MACnE,KAAKxC,iBAAL,CAAuBwC,GAAvB,EAA4B7C,MAAM,CAACiD,iBAAP,CAAyB,QAAzB,CAA5B;MACA,OAAO,KAAK5C,iBAAL,CAAuBwC,GAAvB,CAAP;IACH;EACJ;AACJ,CAPD;AASA;AACA;AACA;AACA;AACA;;;AACA5C,WAAW,CAAC0B,SAAZ,CAAsBuB,SAAtB,GAAkC,YAAW;EACzC,KAAK3C,UAAL,CAAgBC,OAAhB,CAAwB;IAAEN,IAAI,EAAE,KAAKA;EAAb,CAAxB;AACH,CAFD;;AAIAD,WAAW,CAAC0B,SAAZ,CAAsBwB,IAAtB,GAA6B,UAASP,OAAT,EAAkBlC,QAAlB,EAA4B;EACrD;EACA,IAAI,CAAC,KAAKH,UAAL,CAAgB6C,QAArB,EAA+B;IAC3B,KAAK7C,UAAL,CAAgBC,OAAhB,CAAwB;MAAEN,IAAI,EAAE,KAAKA;IAAb,CAAxB;EACH;;EAED,KAAKK,UAAL,CAAgB8C,KAAhB,CAAsBlB,IAAI,CAACmB,SAAL,CAAeV,OAAf,CAAtB;;EACA,KAAKD,oBAAL,CAA0BC,OAA1B,EAAmClC,QAAnC;AACH,CARD;AAUA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACAT,WAAW,CAAC0B,SAAZ,CAAsBJ,EAAtB,GAA2B,UAASgC,IAAT,EAAe7C,QAAf,EAAyB;EAChD,IAAI,OAAOA,QAAP,KAAoB,UAAxB,EAAoC;IAChC,MAAM,IAAI8C,KAAJ,CAAU,mDAAV,CAAN;EACH;;EAED,QAAQD,IAAR;IACI,KAAK,MAAL;MACI,KAAKjD,qBAAL,CAA2BoC,IAA3B,CAAgChC,QAAhC;MACA;IAEJ;;IACA;MACI,KAAKH,UAAL,CAAgBgB,EAAhB,CAAmBgC,IAAnB,EAAyB7C,QAAzB;MACA;EARR;AAUH,CAfD;AAiBA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACAT,WAAW,CAAC0B,SAAZ,CAAsB8B,IAAtB,GAA6B,UAASF,IAAT,EAAe7C,QAAf,EAAyB;EAClD,IAAI,OAAOA,QAAP,KAAoB,UAAxB,EAAoC;IAChC,MAAM,IAAI8C,KAAJ,CAAU,mDAAV,CAAN;EACH;;EAED,KAAKjD,UAAL,CAAgBkD,IAAhB,CAAqBF,IAArB,EAA2B7C,QAA3B;AACH,CAND;AAQA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACAT,WAAW,CAAC0B,SAAZ,CAAsB+B,cAAtB,GAAuC,UAASH,IAAT,EAAe7C,QAAf,EAAyB;EAC5D,IAAMN,KAAK,GAAG,IAAd;;EAEA,QAAQmD,IAAR;IACI,KAAK,MAAL;MACI,KAAKjD,qBAAL,CAA2BQ,OAA3B,CAAmC,UAASI,EAAT,EAAayC,KAAb,EAAoB;QACnD,IAAIzC,EAAE,KAAKR,QAAX,EAAqB;UACjBN,KAAK,CAACE,qBAAN,CAA4BsD,MAA5B,CAAmCD,KAAnC,EAA0C,CAA1C;QACH;MACJ,CAJD;MAKA;;IAEJ;MACI,KAAKpD,UAAL,CAAgBmD,cAAhB,CAA+BH,IAA/B,EAAqC7C,QAArC;MACA;EAXR;AAaH,CAhBD;AAkBA;AACA;AACA;AACA;AACA;AACA;;;AACAT,WAAW,CAAC0B,SAAZ,CAAsBkC,kBAAtB,GAA2C,UAASN,IAAT,EAAe;EACtD,QAAQA,IAAR;IACI,KAAK,MAAL;MACI,KAAKjD,qBAAL,GAA6B,EAA7B;MACA;;IAEJ;MACI,KAAKC,UAAL,CAAgBsD,kBAAhB,CAAmCN,IAAnC;MACA;EAPR;AASH,CAVD;AAYA;AACA;AACA;AACA;AACA;;;AACAtD,WAAW,CAAC0B,SAAZ,CAAsBmC,KAAtB,GAA8B,YAAW;EACrC,KAAKlC,QAAL;;EACA,KAAKtB,qBAAL,GAA6B,EAA7B;EAEA,KAAKC,UAAL,CAAgBsD,kBAAhB,CAAmC,OAAnC;EACA,KAAKtD,UAAL,CAAgBsD,kBAAhB,CAAmC,KAAnC;EACA,KAAKtD,UAAL,CAAgBsD,kBAAhB,CAAmC,SAAnC;EAEA,KAAKpD,gBAAL;AACH,CATD;;AAWAR,WAAW,CAAC0B,SAAZ,CAAsBoC,qBAAtB,GAA8C,YAAW;EACrD,OAAO,IAAP;AACH,CAFD;;AAIAC,MAAM,CAACC,OAAP,GAAiBhE,WAAjB"},"metadata":{},"sourceType":"script"}