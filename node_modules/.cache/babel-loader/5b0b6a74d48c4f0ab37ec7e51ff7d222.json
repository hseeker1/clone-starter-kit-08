{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\User\\\\Documents\\\\clone-starter-kit-08\\\\src\\\\routes\\\\Detail.js\";\nimport React from 'react';\nimport axios from 'axios';\nimport Review from '../components/Review';\nimport WriteReview from '../components/WriteReview';\nimport './Detail.css';\n\nclass Detail extends React.Component {\n  constructor() {\n    super(...arguments);\n    this.state = {\n      isLoading: true,\n      reviews: [],\n      content_id: 0,\n      numRows: 0\n    };\n\n    this.getReviews = async () => {\n      const mycontent_id = this.props.match.params.url_content_id;\n      var myurl;\n\n      if (mycontent_id) {\n        myurl = 'https://8snn27pzii.execute-api.ap-northeast-2.amazonaws.com/web3studydbconn?content_id=' + mycontent_id;\n      } else {\n        myurl = 'https://8snn27pzii.execute-api.ap-northeast-2.amazonaws.com/web3studydbconn?content_id=ALL';\n      }\n\n      const {\n        data: reviews\n      } = await axios.get(myurl);\n      console.log('myurl : ' + myurl); // 람다로 만든 API URL : 리뷰 리스트 업, content_id 에 해당하는 영화 아이디를 넣음\n\n      var numRows = reviews.length;\n      this.setState({\n        reviews,\n        isLoading: false,\n        mycontent_id,\n        numRows\n      });\n    };\n  }\n\n  componentDidMount() {\n    // const { location, history } = this.props;\n    const {\n      history\n    } = this.props;\n\n    if (this.props.match.params.url_content_id === undefined) {\n      //location.state === undefined ||\n      history.push('/');\n    }\n\n    this.getReviews();\n  }\n\n  render() {\n    // const { location } = this.props;\n    const {\n      isLoading,\n      reviews,\n      numRows\n    } = this.state;\n    const url_content_id = this.props.match.params.url_content_id;\n    const url_content_title = this.props.match.params.url_content_title;\n    console.log(\"content_id render:\" + url_content_id);\n\n    if (isLoading) {\n      return /*#__PURE__*/React.createElement(\"section\", {\n        className: \"reviewcontainer\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 50,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"loader\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 51,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        className: \"loader__text\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 52,\n          columnNumber: 11\n        }\n      }, \"Loading...\")));\n    }\n\n    if (!this.state) {\n      return null; // defense code have not mean.\n    }\n\n    if (!numRows) {\n      return /*#__PURE__*/React.createElement(\"section\", {\n        className: \"reviewcontainer\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"reviews\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 10\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 13\n        }\n      }, url_content_title, \"\\uC5D0 \\uB300\\uD574 \\uCCAB\\uB9AC\\uBDF0\\uB97C \\uC791\\uC131\\uD574\\uC8FC\\uC138\\uC694\"), /*#__PURE__*/React.createElement(WriteReview, {\n        content_id: url_content_id,\n        owner_id: \"sohan\",\n        reply_id: 0,\n        numRows: 0,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 10\n        }\n      })));\n    }\n\n    return /*#__PURE__*/React.createElement(\"section\", {\n      className: \"reviewcontainer\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"reviews\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(WriteReview, {\n      content_id: url_content_id,\n      owner_id: \"sohan\",\n      reply_id: 0,\n      numRows: numRows,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 11\n      }\n    }), reviews.map(review => {\n      console.log(\"review : in map\" + review.content_id);\n      return /*#__PURE__*/React.createElement(Review, {\n        review_id: review.id,\n        content_id: review.content_id,\n        title: url_content_title,\n        owner_id: review.owner_id,\n        yn_reply: review.yn_reply,\n        review_title: review.review_title,\n        review_body: review.review_body,\n        modified_day: review.modified_day,\n        yn_visible: review.yn_visible,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 17\n        }\n      });\n    })));\n  }\n\n}\n\nexport default Detail;","map":{"version":3,"names":["React","axios","Review","WriteReview","Detail","Component","state","isLoading","reviews","content_id","numRows","getReviews","mycontent_id","props","match","params","url_content_id","myurl","data","get","console","log","length","setState","componentDidMount","history","undefined","push","render","url_content_title","map","review","id","owner_id","yn_reply","review_title","review_body","modified_day","yn_visible"],"sources":["C:/Users/User/Documents/clone-starter-kit-08/src/routes/Detail.js"],"sourcesContent":["import React from 'react';\nimport axios from 'axios';\nimport Review from '../components/Review';\nimport WriteReview from '../components/WriteReview';\nimport './Detail.css';\n\nclass Detail extends React.Component {\n   state = {\n    isLoading: true,\n    reviews: [],\n    content_id : 0, \n    numRows: 0\n  }; \n\n  getReviews = async () => {\n    const mycontent_id = this.props.match.params.url_content_id;\n    var myurl;\n    if (mycontent_id){\n      myurl = 'https://8snn27pzii.execute-api.ap-northeast-2.amazonaws.com/web3studydbconn?content_id=' + mycontent_id;\n    }\n    else{\n      myurl = 'https://8snn27pzii.execute-api.ap-northeast-2.amazonaws.com/web3studydbconn?content_id=ALL';\n    }\n    const { data:reviews } = await axios.get(myurl); \n    console.log('myurl : ' + myurl);\n    // 람다로 만든 API URL : 리뷰 리스트 업, content_id 에 해당하는 영화 아이디를 넣음\n    var numRows = reviews.length ;\n    this.setState({ reviews, isLoading: false, mycontent_id, numRows });\n  };\n  \n  componentDidMount() {\n   // const { location, history } = this.props;\n    const { history } = this.props;\n    if (this.props.match.params.url_content_id === undefined) { //location.state === undefined ||\n      history.push('/');\n    } \n    this.getReviews();\n  }\n\n  render() {\n    // const { location } = this.props;\n    \n    const { isLoading, reviews, numRows } = this.state;\n    const url_content_id = this.props.match.params.url_content_id;\n    const url_content_title = this.props.match.params.url_content_title ;\n    console.log(\"content_id render:\" + url_content_id);\n    \n     if (isLoading) {\n      return (\n        <section className=\"reviewcontainer\">\n        <div className=\"loader\">\n          <span className=\"loader__text\">Loading...</span>\n        </div>\n        </section>\n      );\n    }\n\n    if (!this.state) {\n      return null; // defense code have not mean.\n    }\n\n    if (!numRows) {\n      return (\n      <section className=\"reviewcontainer\">\n         <div className=\"reviews\">\n            <span>{url_content_title}에 대해 첫리뷰를 작성해주세요</span>\n         <WriteReview\n            content_id={url_content_id}\n            owner_id= \"sohan\"\n            reply_id= {0} \n            numRows = {0}\n          />\n        </div>  \n      </section>\n      );\n    }\n\n    return (\n      <section className=\"reviewcontainer\">\n          <div className=\"reviews\">\n          <WriteReview\n            content_id={url_content_id}\n            owner_id=\"sohan\"\n            reply_id= {0}\n            numRows = {numRows}\n          />\n            {\n              reviews.map((review) => {\n                console.log(\"review : in map\" + review.content_id);\n              return (\n                <Review\n                  review_id = {review.id}\n                  content_id={review.content_id}\n                  title= {url_content_title}\n                  owner_id={review.owner_id}\n                  yn_reply={review.yn_reply}\n                  review_title={review.review_title}\n                  review_body={review.review_body}\n                  modified_day={review.modified_day}\n                  yn_visible={review.yn_visible}\n                />\n              );\n            })}\n          </div>\n      </section> );\n  }\n}\n\nexport default Detail;"],"mappings":"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"},"metadata":{},"sourceType":"module"}