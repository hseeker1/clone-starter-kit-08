{"ast":null,"code":"/*\r\n    Copyright 2018 The caver-js Authors\r\n    This file is part of the caver-js library.\r\n\r\n    The caver-js library is free software: you can redistribute it and/or modify\r\n    it under the terms of the GNU Lesser General Public License as published by\r\n    the Free Software Foundation, either version 3 of the License, or\r\n    (at your option) any later version.\r\n\r\n    The caver-js library is distributed in the hope that it will be useful,\r\n    but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\r\n    GNU Lesser General Public License for more details.\r\n\r\n    You should have received a copy of the GNU Lesser General Public License\r\n    along with the caver-js. If not, see <http://www.gnu.org/licenses/>.\r\n*/\n// const fs = typeof window !== 'object' && require('fs') || {}\nconst fs = {};\nconst DEFAULT_FILE_PATH = './';\nconst DEFAULT_FILE_NAME = 'rpcLogs';\nconst DEFAULT_FILE_EXTENSION = 'log';\n\nconst guaranteeFilePath = filePath => {\n  return filePath.slice(-1) !== '/' ? `${filePath}/` : filePath;\n};\n\nconst appendToFile = (filePath, contents) => {\n  fs.appendFileSync(filePath, `${contents}\\n`, err => {\n    if (err) throw err;\n  });\n};\n\nconst fileLogger = function () {\n  let options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  return (data, next) => {\n    if (typeof options !== 'object') {\n      throw Error('file logger must take an object type argument.');\n    }\n\n    options.path = guaranteeFilePath(options.path) || DEFAULT_FILE_PATH;\n    options.name = options.name || DEFAULT_FILE_NAME;\n    options.extension = options.extension || DEFAULT_FILE_EXTENSION;\n    const fileName = `${options.path}${options.name}.${options.extension}`; // Add timestamp for RPC request || response.\n\n    data.timestamp = new Date().getTime();\n    appendToFile(fileName, JSON.stringify(data));\n    next();\n  };\n};\n\nmodule.exports = fileLogger;","map":{"version":3,"names":["fs","DEFAULT_FILE_PATH","DEFAULT_FILE_NAME","DEFAULT_FILE_EXTENSION","guaranteeFilePath","filePath","slice","appendToFile","contents","appendFileSync","err","fileLogger","options","data","next","Error","path","name","extension","fileName","timestamp","Date","getTime","JSON","stringify","module","exports"],"sources":["C:/Users/User/Documents/clone-starter-kit-08/node_modules/caver-js/packages/caver-middleware/src/builtins/fileLogger.js"],"sourcesContent":["/*\r\n    Copyright 2018 The caver-js Authors\r\n    This file is part of the caver-js library.\r\n\r\n    The caver-js library is free software: you can redistribute it and/or modify\r\n    it under the terms of the GNU Lesser General Public License as published by\r\n    the Free Software Foundation, either version 3 of the License, or\r\n    (at your option) any later version.\r\n\r\n    The caver-js library is distributed in the hope that it will be useful,\r\n    but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\r\n    GNU Lesser General Public License for more details.\r\n\r\n    You should have received a copy of the GNU Lesser General Public License\r\n    along with the caver-js. If not, see <http://www.gnu.org/licenses/>.\r\n*/\r\n\r\n// const fs = typeof window !== 'object' && require('fs') || {}\r\nconst fs = {}\r\n\r\nconst DEFAULT_FILE_PATH = './'\r\nconst DEFAULT_FILE_NAME = 'rpcLogs'\r\nconst DEFAULT_FILE_EXTENSION = 'log'\r\n\r\nconst guaranteeFilePath = filePath => {\r\n    return filePath.slice(-1) !== '/' ? `${filePath}/` : filePath\r\n}\r\n\r\nconst appendToFile = (filePath, contents) => {\r\n    fs.appendFileSync(filePath, `${contents}\\n`, err => {\r\n        if (err) throw err\r\n    })\r\n}\r\n\r\nconst fileLogger = (options = {}) => (data, next) => {\r\n    if (typeof options !== 'object') {\r\n        throw Error('file logger must take an object type argument.')\r\n    }\r\n\r\n    options.path = guaranteeFilePath(options.path) || DEFAULT_FILE_PATH\r\n    options.name = options.name || DEFAULT_FILE_NAME\r\n    options.extension = options.extension || DEFAULT_FILE_EXTENSION\r\n\r\n    const fileName = `${options.path}${options.name}.${options.extension}`\r\n\r\n    // Add timestamp for RPC request || response.\r\n    data.timestamp = new Date().getTime()\r\n\r\n    appendToFile(fileName, JSON.stringify(data))\r\n\r\n    next()\r\n}\r\n\r\nmodule.exports = fileLogger\r\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA,MAAMA,EAAE,GAAG,EAAX;AAEA,MAAMC,iBAAiB,GAAG,IAA1B;AACA,MAAMC,iBAAiB,GAAG,SAA1B;AACA,MAAMC,sBAAsB,GAAG,KAA/B;;AAEA,MAAMC,iBAAiB,GAAGC,QAAQ,IAAI;EAClC,OAAOA,QAAQ,CAACC,KAAT,CAAe,CAAC,CAAhB,MAAuB,GAAvB,GAA8B,GAAED,QAAS,GAAzC,GAA8CA,QAArD;AACH,CAFD;;AAIA,MAAME,YAAY,GAAG,CAACF,QAAD,EAAWG,QAAX,KAAwB;EACzCR,EAAE,CAACS,cAAH,CAAkBJ,QAAlB,EAA6B,GAAEG,QAAS,IAAxC,EAA6CE,GAAG,IAAI;IAChD,IAAIA,GAAJ,EAAS,MAAMA,GAAN;EACZ,CAFD;AAGH,CAJD;;AAMA,MAAMC,UAAU,GAAG;EAAA,IAACC,OAAD,uEAAW,EAAX;EAAA,OAAkB,CAACC,IAAD,EAAOC,IAAP,KAAgB;IACjD,IAAI,OAAOF,OAAP,KAAmB,QAAvB,EAAiC;MAC7B,MAAMG,KAAK,CAAC,gDAAD,CAAX;IACH;;IAEDH,OAAO,CAACI,IAAR,GAAeZ,iBAAiB,CAACQ,OAAO,CAACI,IAAT,CAAjB,IAAmCf,iBAAlD;IACAW,OAAO,CAACK,IAAR,GAAeL,OAAO,CAACK,IAAR,IAAgBf,iBAA/B;IACAU,OAAO,CAACM,SAAR,GAAoBN,OAAO,CAACM,SAAR,IAAqBf,sBAAzC;IAEA,MAAMgB,QAAQ,GAAI,GAAEP,OAAO,CAACI,IAAK,GAAEJ,OAAO,CAACK,IAAK,IAAGL,OAAO,CAACM,SAAU,EAArE,CATiD,CAWjD;;IACAL,IAAI,CAACO,SAAL,GAAiB,IAAIC,IAAJ,GAAWC,OAAX,EAAjB;IAEAf,YAAY,CAACY,QAAD,EAAWI,IAAI,CAACC,SAAL,CAAeX,IAAf,CAAX,CAAZ;IAEAC,IAAI;EACP,CAjBkB;AAAA,CAAnB;;AAmBAW,MAAM,CAACC,OAAP,GAAiBf,UAAjB"},"metadata":{},"sourceType":"script"}