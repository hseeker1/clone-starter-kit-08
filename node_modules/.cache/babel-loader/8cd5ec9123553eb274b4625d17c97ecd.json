{"ast":null,"code":"'use strict';\n\nvar _createForOfIteratorHelper = require(\"C:\\\\Users\\\\User\\\\Documents\\\\clone-starter-kit-08\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/createForOfIteratorHelper\");\n\nvar _classCallCheck = require(\"C:\\\\Users\\\\User\\\\Documents\\\\clone-starter-kit-08\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"C:\\\\Users\\\\User\\\\Documents\\\\clone-starter-kit-08\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/createClass\");\n\nvar _require = require('buffer'),\n    Buffer = _require.Buffer;\n\nvar _require2 = require('iso-url'),\n    URL = _require2.URL;\n\nvar Bignumber = require('bignumber.js').BigNumber;\n\nvar utils = require('./utils');\n\nvar constants = require('./constants');\n\nvar MT = constants.MT;\nvar NUMBYTES = constants.NUMBYTES;\nvar SHIFT32 = constants.SHIFT32;\nvar SYMS = constants.SYMS;\nvar TAG = constants.TAG;\nvar HALF = constants.MT.SIMPLE_FLOAT << 5 | constants.NUMBYTES.TWO;\nvar FLOAT = constants.MT.SIMPLE_FLOAT << 5 | constants.NUMBYTES.FOUR;\nvar DOUBLE = constants.MT.SIMPLE_FLOAT << 5 | constants.NUMBYTES.EIGHT;\nvar TRUE = constants.MT.SIMPLE_FLOAT << 5 | constants.SIMPLE.TRUE;\nvar FALSE = constants.MT.SIMPLE_FLOAT << 5 | constants.SIMPLE.FALSE;\nvar UNDEFINED = constants.MT.SIMPLE_FLOAT << 5 | constants.SIMPLE.UNDEFINED;\nvar NULL = constants.MT.SIMPLE_FLOAT << 5 | constants.SIMPLE.NULL;\nvar MAXINT_BN = new Bignumber('0x20000000000000');\nvar BUF_NAN = Buffer.from('f97e00', 'hex');\nvar BUF_INF_NEG = Buffer.from('f9fc00', 'hex');\nvar BUF_INF_POS = Buffer.from('f97c00', 'hex');\n\nfunction toType(obj) {\n  // [object Type]\n  // --------8---1\n  return {}.toString.call(obj).slice(8, -1);\n}\n/**\r\n * Transform JavaScript values into CBOR bytes\r\n *\r\n */\n\n\nvar Encoder = /*#__PURE__*/function () {\n  /**\r\n   * @param {Object} [options={}]\r\n   * @param {function(Buffer)} options.stream\r\n   */\n  function Encoder(options) {\n    _classCallCheck(this, Encoder);\n\n    options = options || {};\n    this.streaming = typeof options.stream === 'function';\n    this.onData = options.stream;\n    this.semanticTypes = [[URL, this._pushUrl], [Bignumber, this._pushBigNumber]];\n    var addTypes = options.genTypes || [];\n    var len = addTypes.length;\n\n    for (var i = 0; i < len; i++) {\n      this.addSemanticType(addTypes[i][0], addTypes[i][1]);\n    }\n\n    this._reset();\n  }\n\n  _createClass(Encoder, [{\n    key: \"addSemanticType\",\n    value: function addSemanticType(type, fun) {\n      var len = this.semanticTypes.length;\n\n      for (var i = 0; i < len; i++) {\n        var typ = this.semanticTypes[i][0];\n\n        if (typ === type) {\n          var old = this.semanticTypes[i][1];\n          this.semanticTypes[i][1] = fun;\n          return old;\n        }\n      }\n\n      this.semanticTypes.push([type, fun]);\n      return null;\n    }\n  }, {\n    key: \"push\",\n    value: function push(val) {\n      if (!val) {\n        return true;\n      }\n\n      this.result[this.offset] = val;\n      this.resultMethod[this.offset] = 0;\n      this.resultLength[this.offset] = val.length;\n      this.offset++;\n\n      if (this.streaming) {\n        this.onData(this.finalize());\n      }\n\n      return true;\n    }\n  }, {\n    key: \"pushWrite\",\n    value: function pushWrite(val, method, len) {\n      this.result[this.offset] = val;\n      this.resultMethod[this.offset] = method;\n      this.resultLength[this.offset] = len;\n      this.offset++;\n\n      if (this.streaming) {\n        this.onData(this.finalize());\n      }\n\n      return true;\n    }\n  }, {\n    key: \"_pushUInt8\",\n    value: function _pushUInt8(val) {\n      return this.pushWrite(val, 1, 1);\n    }\n  }, {\n    key: \"_pushUInt16BE\",\n    value: function _pushUInt16BE(val) {\n      return this.pushWrite(val, 2, 2);\n    }\n  }, {\n    key: \"_pushUInt32BE\",\n    value: function _pushUInt32BE(val) {\n      return this.pushWrite(val, 3, 4);\n    }\n  }, {\n    key: \"_pushDoubleBE\",\n    value: function _pushDoubleBE(val) {\n      return this.pushWrite(val, 4, 8);\n    }\n  }, {\n    key: \"_pushNaN\",\n    value: function _pushNaN() {\n      return this.push(BUF_NAN);\n    }\n  }, {\n    key: \"_pushInfinity\",\n    value: function _pushInfinity(obj) {\n      var half = obj < 0 ? BUF_INF_NEG : BUF_INF_POS;\n      return this.push(half);\n    }\n  }, {\n    key: \"_pushFloat\",\n    value: function _pushFloat(obj) {\n      var b2 = Buffer.allocUnsafe(2);\n\n      if (utils.writeHalf(b2, obj)) {\n        if (utils.parseHalf(b2) === obj) {\n          return this._pushUInt8(HALF) && this.push(b2);\n        }\n      }\n\n      var b4 = Buffer.allocUnsafe(4);\n      b4.writeFloatBE(obj, 0);\n\n      if (b4.readFloatBE(0) === obj) {\n        return this._pushUInt8(FLOAT) && this.push(b4);\n      }\n\n      return this._pushUInt8(DOUBLE) && this._pushDoubleBE(obj);\n    }\n  }, {\n    key: \"_pushInt\",\n    value: function _pushInt(obj, mt, orig) {\n      var m = mt << 5;\n\n      if (obj < 24) {\n        return this._pushUInt8(m | obj);\n      }\n\n      if (obj <= 0xff) {\n        return this._pushUInt8(m | NUMBYTES.ONE) && this._pushUInt8(obj);\n      }\n\n      if (obj <= 0xffff) {\n        return this._pushUInt8(m | NUMBYTES.TWO) && this._pushUInt16BE(obj);\n      }\n\n      if (obj <= 0xffffffff) {\n        return this._pushUInt8(m | NUMBYTES.FOUR) && this._pushUInt32BE(obj);\n      }\n\n      if (obj <= Number.MAX_SAFE_INTEGER) {\n        return this._pushUInt8(m | NUMBYTES.EIGHT) && this._pushUInt32BE(Math.floor(obj / SHIFT32)) && this._pushUInt32BE(obj % SHIFT32);\n      }\n\n      if (mt === MT.NEG_INT) {\n        return this._pushFloat(orig);\n      }\n\n      return this._pushFloat(obj);\n    }\n  }, {\n    key: \"_pushIntNum\",\n    value: function _pushIntNum(obj) {\n      if (obj < 0) {\n        return this._pushInt(-obj - 1, MT.NEG_INT, obj);\n      } else {\n        return this._pushInt(obj, MT.POS_INT);\n      }\n    }\n  }, {\n    key: \"_pushNumber\",\n    value: function _pushNumber(obj) {\n      switch (false) {\n        case obj === obj:\n          // eslint-disable-line\n          return this._pushNaN(obj);\n\n        case isFinite(obj):\n          return this._pushInfinity(obj);\n\n        case obj % 1 !== 0:\n          return this._pushIntNum(obj);\n\n        default:\n          return this._pushFloat(obj);\n      }\n    }\n  }, {\n    key: \"_pushString\",\n    value: function _pushString(obj) {\n      var len = Buffer.byteLength(obj, 'utf8');\n      return this._pushInt(len, MT.UTF8_STRING) && this.pushWrite(obj, 5, len);\n    }\n  }, {\n    key: \"_pushBoolean\",\n    value: function _pushBoolean(obj) {\n      return this._pushUInt8(obj ? TRUE : FALSE);\n    }\n  }, {\n    key: \"_pushUndefined\",\n    value: function _pushUndefined(obj) {\n      return this._pushUInt8(UNDEFINED);\n    }\n  }, {\n    key: \"_pushArray\",\n    value: function _pushArray(gen, obj) {\n      var len = obj.length;\n\n      if (!gen._pushInt(len, MT.ARRAY)) {\n        return false;\n      }\n\n      for (var j = 0; j < len; j++) {\n        if (!gen.pushAny(obj[j])) {\n          return false;\n        }\n      }\n\n      return true;\n    }\n  }, {\n    key: \"_pushTag\",\n    value: function _pushTag(tag) {\n      return this._pushInt(tag, MT.TAG);\n    }\n  }, {\n    key: \"_pushDate\",\n    value: function _pushDate(gen, obj) {\n      // Round date, to get seconds since 1970-01-01 00:00:00 as defined in\n      // Sec. 2.4.1 and get a possibly more compact encoding. Note that it is\n      // still allowed to encode fractions of seconds which can be achieved by\n      // changing overwriting the encode function for Date objects.\n      return gen._pushTag(TAG.DATE_EPOCH) && gen.pushAny(Math.round(obj / 1000));\n    }\n  }, {\n    key: \"_pushBuffer\",\n    value: function _pushBuffer(gen, obj) {\n      return gen._pushInt(obj.length, MT.BYTE_STRING) && gen.push(obj);\n    }\n  }, {\n    key: \"_pushNoFilter\",\n    value: function _pushNoFilter(gen, obj) {\n      return gen._pushBuffer(gen, obj.slice());\n    }\n  }, {\n    key: \"_pushRegexp\",\n    value: function _pushRegexp(gen, obj) {\n      return gen._pushTag(TAG.REGEXP) && gen.pushAny(obj.source);\n    }\n  }, {\n    key: \"_pushSet\",\n    value: function _pushSet(gen, obj) {\n      if (!gen._pushInt(obj.size, MT.ARRAY)) {\n        return false;\n      }\n\n      var _iterator = _createForOfIteratorHelper(obj),\n          _step;\n\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var x = _step.value;\n\n          if (!gen.pushAny(x)) {\n            return false;\n          }\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n\n      return true;\n    }\n  }, {\n    key: \"_pushUrl\",\n    value: function _pushUrl(gen, obj) {\n      return gen._pushTag(TAG.URI) && gen.pushAny(obj.format());\n    }\n  }, {\n    key: \"_pushBigint\",\n    value: function _pushBigint(obj) {\n      var tag = TAG.POS_BIGINT;\n\n      if (obj.isNegative()) {\n        obj = obj.negated().minus(1);\n        tag = TAG.NEG_BIGINT;\n      }\n\n      var str = obj.toString(16);\n\n      if (str.length % 2) {\n        str = '0' + str;\n      }\n\n      var buf = Buffer.from(str, 'hex');\n      return this._pushTag(tag) && this._pushBuffer(this, buf);\n    }\n  }, {\n    key: \"_pushBigNumber\",\n    value: function _pushBigNumber(gen, obj) {\n      if (obj.isNaN()) {\n        return gen._pushNaN();\n      }\n\n      if (!obj.isFinite()) {\n        return gen._pushInfinity(obj.isNegative() ? -Infinity : Infinity);\n      }\n\n      if (obj.isInteger()) {\n        return gen._pushBigint(obj);\n      }\n\n      if (!(gen._pushTag(TAG.DECIMAL_FRAC) && gen._pushInt(2, MT.ARRAY))) {\n        return false;\n      }\n\n      var dec = obj.decimalPlaces();\n      var slide = obj.multipliedBy(new Bignumber(10).pow(dec));\n\n      if (!gen._pushIntNum(-dec)) {\n        return false;\n      }\n\n      if (slide.abs().isLessThan(MAXINT_BN)) {\n        return gen._pushIntNum(slide.toNumber());\n      } else {\n        return gen._pushBigint(slide);\n      }\n    }\n  }, {\n    key: \"_pushMap\",\n    value: function _pushMap(gen, obj) {\n      if (!gen._pushInt(obj.size, MT.MAP)) {\n        return false;\n      }\n\n      return this._pushRawMap(obj.size, Array.from(obj));\n    }\n  }, {\n    key: \"_pushObject\",\n    value: function _pushObject(obj) {\n      if (!obj) {\n        return this._pushUInt8(NULL);\n      }\n\n      var len = this.semanticTypes.length;\n\n      for (var i = 0; i < len; i++) {\n        if (obj instanceof this.semanticTypes[i][0]) {\n          return this.semanticTypes[i][1].call(obj, this, obj);\n        }\n      }\n\n      var f = obj.encodeCBOR;\n\n      if (typeof f === 'function') {\n        return f.call(obj, this);\n      }\n\n      var keys = Object.keys(obj);\n      var keyLength = keys.length;\n\n      if (!this._pushInt(keyLength, MT.MAP)) {\n        return false;\n      }\n\n      return this._pushRawMap(keyLength, keys.map(function (k) {\n        return [k, obj[k]];\n      }));\n    }\n  }, {\n    key: \"_pushRawMap\",\n    value: function _pushRawMap(len, map) {\n      // Sort keys for canoncialization\n      // 1. encode key\n      // 2. shorter key comes before longer key\n      // 3. same length keys are sorted with lower\n      //    byte value before higher\n      map = map.map(function (a) {\n        a[0] = Encoder.encode(a[0]);\n        return a;\n      }).sort(utils.keySorter);\n\n      for (var j = 0; j < len; j++) {\n        if (!this.push(map[j][0])) {\n          return false;\n        }\n\n        if (!this.pushAny(map[j][1])) {\n          return false;\n        }\n      }\n\n      return true;\n    }\n    /**\r\n     * Alias for `.pushAny`\r\n     *\r\n     * @param {*} obj\r\n     * @returns {boolean} true on success\r\n     */\n\n  }, {\n    key: \"write\",\n    value: function write(obj) {\n      return this.pushAny(obj);\n    }\n    /**\r\n     * Push any supported type onto the encoded stream\r\n     *\r\n     * @param {any} obj\r\n     * @returns {boolean} true on success\r\n     */\n\n  }, {\n    key: \"pushAny\",\n    value: function pushAny(obj) {\n      var typ = toType(obj);\n\n      switch (typ) {\n        case 'Number':\n          return this._pushNumber(obj);\n\n        case 'String':\n          return this._pushString(obj);\n\n        case 'Boolean':\n          return this._pushBoolean(obj);\n\n        case 'Object':\n          return this._pushObject(obj);\n\n        case 'Array':\n          return this._pushArray(this, obj);\n\n        case 'Uint8Array':\n          return this._pushBuffer(this, Buffer.isBuffer(obj) ? obj : Buffer.from(obj));\n\n        case 'Null':\n          return this._pushUInt8(NULL);\n\n        case 'Undefined':\n          return this._pushUndefined(obj);\n\n        case 'Map':\n          return this._pushMap(this, obj);\n\n        case 'Set':\n          return this._pushSet(this, obj);\n\n        case 'URL':\n          return this._pushUrl(this, obj);\n\n        case 'BigNumber':\n          return this._pushBigNumber(this, obj);\n\n        case 'Date':\n          return this._pushDate(this, obj);\n\n        case 'RegExp':\n          return this._pushRegexp(this, obj);\n\n        case 'Symbol':\n          switch (obj) {\n            case SYMS.NULL:\n              return this._pushObject(null);\n\n            case SYMS.UNDEFINED:\n              return this._pushUndefined(undefined);\n            // TODO: Add pluggable support for other symbols\n\n            default:\n              throw new Error('Unknown symbol: ' + obj.toString());\n          }\n\n        default:\n          throw new Error('Unknown type: ' + typeof obj + ', ' + (obj ? obj.toString() : ''));\n      }\n    }\n  }, {\n    key: \"finalize\",\n    value: function finalize() {\n      if (this.offset === 0) {\n        return null;\n      }\n\n      var result = this.result;\n      var resultLength = this.resultLength;\n      var resultMethod = this.resultMethod;\n      var offset = this.offset; // Determine the size of the buffer\n\n      var size = 0;\n      var i = 0;\n\n      for (; i < offset; i++) {\n        size += resultLength[i];\n      }\n\n      var res = Buffer.allocUnsafe(size);\n      var index = 0;\n      var length = 0; // Write the content into the result buffer\n\n      for (i = 0; i < offset; i++) {\n        length = resultLength[i];\n\n        switch (resultMethod[i]) {\n          case 0:\n            result[i].copy(res, index);\n            break;\n\n          case 1:\n            res.writeUInt8(result[i], index, true);\n            break;\n\n          case 2:\n            res.writeUInt16BE(result[i], index, true);\n            break;\n\n          case 3:\n            res.writeUInt32BE(result[i], index, true);\n            break;\n\n          case 4:\n            res.writeDoubleBE(result[i], index, true);\n            break;\n\n          case 5:\n            res.write(result[i], index, length, 'utf8');\n            break;\n\n          default:\n            throw new Error('unkown method');\n        }\n\n        index += length;\n      }\n\n      var tmp = res;\n\n      this._reset();\n\n      return tmp;\n    }\n  }, {\n    key: \"_reset\",\n    value: function _reset() {\n      this.result = [];\n      this.resultMethod = [];\n      this.resultLength = [];\n      this.offset = 0;\n    }\n    /**\r\n     * Encode the given value\r\n     * @param {*} o\r\n     * @returns {Buffer}\r\n     */\n\n  }], [{\n    key: \"encode\",\n    value: function encode(o) {\n      var enc = new Encoder();\n      var ret = enc.pushAny(o);\n\n      if (!ret) {\n        throw new Error('Failed to encode input');\n      }\n\n      return enc.finalize();\n    }\n  }]);\n\n  return Encoder;\n}();\n\nmodule.exports = Encoder;","map":{"version":3,"names":["require","Buffer","URL","Bignumber","BigNumber","utils","constants","MT","NUMBYTES","SHIFT32","SYMS","TAG","HALF","SIMPLE_FLOAT","TWO","FLOAT","FOUR","DOUBLE","EIGHT","TRUE","SIMPLE","FALSE","UNDEFINED","NULL","MAXINT_BN","BUF_NAN","from","BUF_INF_NEG","BUF_INF_POS","toType","obj","toString","call","slice","Encoder","options","streaming","stream","onData","semanticTypes","_pushUrl","_pushBigNumber","addTypes","genTypes","len","length","i","addSemanticType","_reset","type","fun","typ","old","push","val","result","offset","resultMethod","resultLength","finalize","method","pushWrite","half","b2","allocUnsafe","writeHalf","parseHalf","_pushUInt8","b4","writeFloatBE","readFloatBE","_pushDoubleBE","mt","orig","m","ONE","_pushUInt16BE","_pushUInt32BE","Number","MAX_SAFE_INTEGER","Math","floor","NEG_INT","_pushFloat","_pushInt","POS_INT","_pushNaN","isFinite","_pushInfinity","_pushIntNum","byteLength","UTF8_STRING","gen","ARRAY","j","pushAny","tag","_pushTag","DATE_EPOCH","round","BYTE_STRING","_pushBuffer","REGEXP","source","size","x","URI","format","POS_BIGINT","isNegative","negated","minus","NEG_BIGINT","str","buf","isNaN","Infinity","isInteger","_pushBigint","DECIMAL_FRAC","dec","decimalPlaces","slide","multipliedBy","pow","abs","isLessThan","toNumber","MAP","_pushRawMap","Array","f","encodeCBOR","keys","Object","keyLength","map","k","a","encode","sort","keySorter","_pushNumber","_pushString","_pushBoolean","_pushObject","_pushArray","isBuffer","_pushUndefined","_pushMap","_pushSet","_pushDate","_pushRegexp","undefined","Error","res","index","copy","writeUInt8","writeUInt16BE","writeUInt32BE","writeDoubleBE","write","tmp","o","enc","ret","module","exports"],"sources":["C:/Users/User/Documents/clone-starter-kit-08/node_modules/borc/src/encoder.js"],"sourcesContent":["'use strict'\r\n\r\nconst { Buffer } = require('buffer')\r\nconst { URL } = require('iso-url')\r\nconst Bignumber = require('bignumber.js').BigNumber\r\n\r\nconst utils = require('./utils')\r\nconst constants = require('./constants')\r\nconst MT = constants.MT\r\nconst NUMBYTES = constants.NUMBYTES\r\nconst SHIFT32 = constants.SHIFT32\r\nconst SYMS = constants.SYMS\r\nconst TAG = constants.TAG\r\nconst HALF = (constants.MT.SIMPLE_FLOAT << 5) | constants.NUMBYTES.TWO\r\nconst FLOAT = (constants.MT.SIMPLE_FLOAT << 5) | constants.NUMBYTES.FOUR\r\nconst DOUBLE = (constants.MT.SIMPLE_FLOAT << 5) | constants.NUMBYTES.EIGHT\r\nconst TRUE = (constants.MT.SIMPLE_FLOAT << 5) | constants.SIMPLE.TRUE\r\nconst FALSE = (constants.MT.SIMPLE_FLOAT << 5) | constants.SIMPLE.FALSE\r\nconst UNDEFINED = (constants.MT.SIMPLE_FLOAT << 5) | constants.SIMPLE.UNDEFINED\r\nconst NULL = (constants.MT.SIMPLE_FLOAT << 5) | constants.SIMPLE.NULL\r\n\r\nconst MAXINT_BN = new Bignumber('0x20000000000000')\r\nconst BUF_NAN = Buffer.from('f97e00', 'hex')\r\nconst BUF_INF_NEG = Buffer.from('f9fc00', 'hex')\r\nconst BUF_INF_POS = Buffer.from('f97c00', 'hex')\r\n\r\nfunction toType (obj) {\r\n  // [object Type]\r\n  // --------8---1\r\n  return ({}).toString.call(obj).slice(8, -1)\r\n}\r\n\r\n/**\r\n * Transform JavaScript values into CBOR bytes\r\n *\r\n */\r\nclass Encoder {\r\n  /**\r\n   * @param {Object} [options={}]\r\n   * @param {function(Buffer)} options.stream\r\n   */\r\n  constructor (options) {\r\n    options = options || {}\r\n\r\n    this.streaming = typeof options.stream === 'function'\r\n    this.onData = options.stream\r\n\r\n    this.semanticTypes = [\r\n      [URL, this._pushUrl],\r\n      [Bignumber, this._pushBigNumber]\r\n    ]\r\n\r\n    const addTypes = options.genTypes || []\r\n    const len = addTypes.length\r\n    for (let i = 0; i < len; i++) {\r\n      this.addSemanticType(\r\n        addTypes[i][0],\r\n        addTypes[i][1]\r\n      )\r\n    }\r\n\r\n    this._reset()\r\n  }\r\n\r\n  addSemanticType (type, fun) {\r\n    const len = this.semanticTypes.length\r\n    for (let i = 0; i < len; i++) {\r\n      const typ = this.semanticTypes[i][0]\r\n      if (typ === type) {\r\n        const old = this.semanticTypes[i][1]\r\n        this.semanticTypes[i][1] = fun\r\n        return old\r\n      }\r\n    }\r\n    this.semanticTypes.push([type, fun])\r\n    return null\r\n  }\r\n\r\n  push (val) {\r\n    if (!val) {\r\n      return true\r\n    }\r\n\r\n    this.result[this.offset] = val\r\n    this.resultMethod[this.offset] = 0\r\n    this.resultLength[this.offset] = val.length\r\n    this.offset++\r\n\r\n    if (this.streaming) {\r\n      this.onData(this.finalize())\r\n    }\r\n\r\n    return true\r\n  }\r\n\r\n  pushWrite (val, method, len) {\r\n    this.result[this.offset] = val\r\n    this.resultMethod[this.offset] = method\r\n    this.resultLength[this.offset] = len\r\n    this.offset++\r\n\r\n    if (this.streaming) {\r\n      this.onData(this.finalize())\r\n    }\r\n\r\n    return true\r\n  }\r\n\r\n  _pushUInt8 (val) {\r\n    return this.pushWrite(val, 1, 1)\r\n  }\r\n\r\n  _pushUInt16BE (val) {\r\n    return this.pushWrite(val, 2, 2)\r\n  }\r\n\r\n  _pushUInt32BE (val) {\r\n    return this.pushWrite(val, 3, 4)\r\n  }\r\n\r\n  _pushDoubleBE (val) {\r\n    return this.pushWrite(val, 4, 8)\r\n  }\r\n\r\n  _pushNaN () {\r\n    return this.push(BUF_NAN)\r\n  }\r\n\r\n  _pushInfinity (obj) {\r\n    const half = (obj < 0) ? BUF_INF_NEG : BUF_INF_POS\r\n    return this.push(half)\r\n  }\r\n\r\n  _pushFloat (obj) {\r\n    const b2 = Buffer.allocUnsafe(2)\r\n\r\n    if (utils.writeHalf(b2, obj)) {\r\n      if (utils.parseHalf(b2) === obj) {\r\n        return this._pushUInt8(HALF) && this.push(b2)\r\n      }\r\n    }\r\n\r\n    const b4 = Buffer.allocUnsafe(4)\r\n    b4.writeFloatBE(obj, 0)\r\n    if (b4.readFloatBE(0) === obj) {\r\n      return this._pushUInt8(FLOAT) && this.push(b4)\r\n    }\r\n\r\n    return this._pushUInt8(DOUBLE) && this._pushDoubleBE(obj)\r\n  }\r\n\r\n  _pushInt (obj, mt, orig) {\r\n    const m = mt << 5\r\n    if (obj < 24) {\r\n      return this._pushUInt8(m | obj)\r\n    }\r\n\r\n    if (obj <= 0xff) {\r\n      return this._pushUInt8(m | NUMBYTES.ONE) && this._pushUInt8(obj)\r\n    }\r\n\r\n    if (obj <= 0xffff) {\r\n      return this._pushUInt8(m | NUMBYTES.TWO) && this._pushUInt16BE(obj)\r\n    }\r\n\r\n    if (obj <= 0xffffffff) {\r\n      return this._pushUInt8(m | NUMBYTES.FOUR) && this._pushUInt32BE(obj)\r\n    }\r\n\r\n    if (obj <= Number.MAX_SAFE_INTEGER) {\r\n      return this._pushUInt8(m | NUMBYTES.EIGHT) &&\r\n        this._pushUInt32BE(Math.floor(obj / SHIFT32)) &&\r\n        this._pushUInt32BE(obj % SHIFT32)\r\n    }\r\n\r\n    if (mt === MT.NEG_INT) {\r\n      return this._pushFloat(orig)\r\n    }\r\n\r\n    return this._pushFloat(obj)\r\n  }\r\n\r\n  _pushIntNum (obj) {\r\n    if (obj < 0) {\r\n      return this._pushInt(-obj - 1, MT.NEG_INT, obj)\r\n    } else {\r\n      return this._pushInt(obj, MT.POS_INT)\r\n    }\r\n  }\r\n\r\n  _pushNumber (obj) {\r\n    switch (false) {\r\n      case (obj === obj): // eslint-disable-line\r\n        return this._pushNaN(obj)\r\n      case isFinite(obj):\r\n        return this._pushInfinity(obj)\r\n      case ((obj % 1) !== 0):\r\n        return this._pushIntNum(obj)\r\n      default:\r\n        return this._pushFloat(obj)\r\n    }\r\n  }\r\n\r\n  _pushString (obj) {\r\n    const len = Buffer.byteLength(obj, 'utf8')\r\n    return this._pushInt(len, MT.UTF8_STRING) && this.pushWrite(obj, 5, len)\r\n  }\r\n\r\n  _pushBoolean (obj) {\r\n    return this._pushUInt8(obj ? TRUE : FALSE)\r\n  }\r\n\r\n  _pushUndefined (obj) {\r\n    return this._pushUInt8(UNDEFINED)\r\n  }\r\n\r\n  _pushArray (gen, obj) {\r\n    const len = obj.length\r\n    if (!gen._pushInt(len, MT.ARRAY)) {\r\n      return false\r\n    }\r\n    for (let j = 0; j < len; j++) {\r\n      if (!gen.pushAny(obj[j])) {\r\n        return false\r\n      }\r\n    }\r\n    return true\r\n  }\r\n\r\n  _pushTag (tag) {\r\n    return this._pushInt(tag, MT.TAG)\r\n  }\r\n\r\n  _pushDate (gen, obj) {\r\n    // Round date, to get seconds since 1970-01-01 00:00:00 as defined in\r\n    // Sec. 2.4.1 and get a possibly more compact encoding. Note that it is\r\n    // still allowed to encode fractions of seconds which can be achieved by\r\n    // changing overwriting the encode function for Date objects.\r\n    return gen._pushTag(TAG.DATE_EPOCH) && gen.pushAny(Math.round(obj / 1000))\r\n  }\r\n\r\n  _pushBuffer (gen, obj) {\r\n    return gen._pushInt(obj.length, MT.BYTE_STRING) && gen.push(obj)\r\n  }\r\n\r\n  _pushNoFilter (gen, obj) {\r\n    return gen._pushBuffer(gen, obj.slice())\r\n  }\r\n\r\n  _pushRegexp (gen, obj) {\r\n    return gen._pushTag(TAG.REGEXP) && gen.pushAny(obj.source)\r\n  }\r\n\r\n  _pushSet (gen, obj) {\r\n    if (!gen._pushInt(obj.size, MT.ARRAY)) {\r\n      return false\r\n    }\r\n    for (const x of obj) {\r\n      if (!gen.pushAny(x)) {\r\n        return false\r\n      }\r\n    }\r\n    return true\r\n  }\r\n\r\n  _pushUrl (gen, obj) {\r\n    return gen._pushTag(TAG.URI) && gen.pushAny(obj.format())\r\n  }\r\n\r\n  _pushBigint (obj) {\r\n    let tag = TAG.POS_BIGINT\r\n    if (obj.isNegative()) {\r\n      obj = obj.negated().minus(1)\r\n      tag = TAG.NEG_BIGINT\r\n    }\r\n    let str = obj.toString(16)\r\n    if (str.length % 2) {\r\n      str = '0' + str\r\n    }\r\n    const buf = Buffer.from(str, 'hex')\r\n    return this._pushTag(tag) && this._pushBuffer(this, buf)\r\n  }\r\n\r\n  _pushBigNumber (gen, obj) {\r\n    if (obj.isNaN()) {\r\n      return gen._pushNaN()\r\n    }\r\n    if (!obj.isFinite()) {\r\n      return gen._pushInfinity(obj.isNegative() ? -Infinity : Infinity)\r\n    }\r\n    if (obj.isInteger()) {\r\n      return gen._pushBigint(obj)\r\n    }\r\n    if (!(gen._pushTag(TAG.DECIMAL_FRAC) &&\r\n      gen._pushInt(2, MT.ARRAY))) {\r\n      return false\r\n    }\r\n\r\n    const dec = obj.decimalPlaces()\r\n    const slide = obj.multipliedBy(new Bignumber(10).pow(dec))\r\n    if (!gen._pushIntNum(-dec)) {\r\n      return false\r\n    }\r\n    if (slide.abs().isLessThan(MAXINT_BN)) {\r\n      return gen._pushIntNum(slide.toNumber())\r\n    } else {\r\n      return gen._pushBigint(slide)\r\n    }\r\n  }\r\n\r\n  _pushMap (gen, obj) {\r\n    if (!gen._pushInt(obj.size, MT.MAP)) {\r\n      return false\r\n    }\r\n\r\n    return this._pushRawMap(\r\n      obj.size,\r\n      Array.from(obj)\r\n    )\r\n  }\r\n\r\n  _pushObject (obj) {\r\n    if (!obj) {\r\n      return this._pushUInt8(NULL)\r\n    }\r\n\r\n    var len = this.semanticTypes.length\r\n    for (var i = 0; i < len; i++) {\r\n      if (obj instanceof this.semanticTypes[i][0]) {\r\n        return this.semanticTypes[i][1].call(obj, this, obj)\r\n      }\r\n    }\r\n\r\n    var f = obj.encodeCBOR\r\n    if (typeof f === 'function') {\r\n      return f.call(obj, this)\r\n    }\r\n\r\n    var keys = Object.keys(obj)\r\n    var keyLength = keys.length\r\n    if (!this._pushInt(keyLength, MT.MAP)) {\r\n      return false\r\n    }\r\n\r\n    return this._pushRawMap(\r\n      keyLength,\r\n      keys.map((k) => [k, obj[k]])\r\n    )\r\n  }\r\n\r\n  _pushRawMap (len, map) {\r\n    // Sort keys for canoncialization\r\n    // 1. encode key\r\n    // 2. shorter key comes before longer key\r\n    // 3. same length keys are sorted with lower\r\n    //    byte value before higher\r\n\r\n    map = map.map(function (a) {\r\n      a[0] = Encoder.encode(a[0])\r\n      return a\r\n    }).sort(utils.keySorter)\r\n\r\n    for (var j = 0; j < len; j++) {\r\n      if (!this.push(map[j][0])) {\r\n        return false\r\n      }\r\n\r\n      if (!this.pushAny(map[j][1])) {\r\n        return false\r\n      }\r\n    }\r\n\r\n    return true\r\n  }\r\n\r\n  /**\r\n   * Alias for `.pushAny`\r\n   *\r\n   * @param {*} obj\r\n   * @returns {boolean} true on success\r\n   */\r\n  write (obj) {\r\n    return this.pushAny(obj)\r\n  }\r\n\r\n  /**\r\n   * Push any supported type onto the encoded stream\r\n   *\r\n   * @param {any} obj\r\n   * @returns {boolean} true on success\r\n   */\r\n  pushAny (obj) {\r\n    var typ = toType(obj)\r\n\r\n    switch (typ) {\r\n      case 'Number':\r\n        return this._pushNumber(obj)\r\n      case 'String':\r\n        return this._pushString(obj)\r\n      case 'Boolean':\r\n        return this._pushBoolean(obj)\r\n      case 'Object':\r\n        return this._pushObject(obj)\r\n      case 'Array':\r\n        return this._pushArray(this, obj)\r\n      case 'Uint8Array':\r\n        return this._pushBuffer(this, Buffer.isBuffer(obj) ? obj : Buffer.from(obj))\r\n      case 'Null':\r\n        return this._pushUInt8(NULL)\r\n      case 'Undefined':\r\n        return this._pushUndefined(obj)\r\n      case 'Map':\r\n        return this._pushMap(this, obj)\r\n      case 'Set':\r\n        return this._pushSet(this, obj)\r\n      case 'URL':\r\n        return this._pushUrl(this, obj)\r\n      case 'BigNumber':\r\n        return this._pushBigNumber(this, obj)\r\n      case 'Date':\r\n        return this._pushDate(this, obj)\r\n      case 'RegExp':\r\n        return this._pushRegexp(this, obj)\r\n      case 'Symbol':\r\n        switch (obj) {\r\n          case SYMS.NULL:\r\n            return this._pushObject(null)\r\n          case SYMS.UNDEFINED:\r\n            return this._pushUndefined(undefined)\r\n          // TODO: Add pluggable support for other symbols\r\n          default:\r\n            throw new Error('Unknown symbol: ' + obj.toString())\r\n        }\r\n      default:\r\n        throw new Error('Unknown type: ' + typeof obj + ', ' + (obj ? obj.toString() : ''))\r\n    }\r\n  }\r\n\r\n  finalize () {\r\n    if (this.offset === 0) {\r\n      return null\r\n    }\r\n\r\n    var result = this.result\r\n    var resultLength = this.resultLength\r\n    var resultMethod = this.resultMethod\r\n    var offset = this.offset\r\n\r\n    // Determine the size of the buffer\r\n    var size = 0\r\n    var i = 0\r\n\r\n    for (; i < offset; i++) {\r\n      size += resultLength[i]\r\n    }\r\n\r\n    var res = Buffer.allocUnsafe(size)\r\n    var index = 0\r\n    var length = 0\r\n\r\n    // Write the content into the result buffer\r\n    for (i = 0; i < offset; i++) {\r\n      length = resultLength[i]\r\n\r\n      switch (resultMethod[i]) {\r\n        case 0:\r\n          result[i].copy(res, index)\r\n          break\r\n        case 1:\r\n          res.writeUInt8(result[i], index, true)\r\n          break\r\n        case 2:\r\n          res.writeUInt16BE(result[i], index, true)\r\n          break\r\n        case 3:\r\n          res.writeUInt32BE(result[i], index, true)\r\n          break\r\n        case 4:\r\n          res.writeDoubleBE(result[i], index, true)\r\n          break\r\n        case 5:\r\n          res.write(result[i], index, length, 'utf8')\r\n          break\r\n        default:\r\n          throw new Error('unkown method')\r\n      }\r\n\r\n      index += length\r\n    }\r\n\r\n    var tmp = res\r\n\r\n    this._reset()\r\n\r\n    return tmp\r\n  }\r\n\r\n  _reset () {\r\n    this.result = []\r\n    this.resultMethod = []\r\n    this.resultLength = []\r\n    this.offset = 0\r\n  }\r\n\r\n  /**\r\n   * Encode the given value\r\n   * @param {*} o\r\n   * @returns {Buffer}\r\n   */\r\n  static encode (o) {\r\n    const enc = new Encoder()\r\n    const ret = enc.pushAny(o)\r\n    if (!ret) {\r\n      throw new Error('Failed to encode input')\r\n    }\r\n\r\n    return enc.finalize()\r\n  }\r\n}\r\n\r\nmodule.exports = Encoder\r\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}