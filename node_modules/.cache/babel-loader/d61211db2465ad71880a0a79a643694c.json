{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\User\\\\Documents\\\\clone-starter-kit-08\\\\src\\\\components\\\\Likedislike.js\";\nimport React, { useState, useEffect } from 'react';\nimport './Review.css';\nimport axios from 'axios';\nimport PropTypes from 'prop-types';\nimport { useLayoutEffect } from 'react';\nlet ownerchk;\n\nfunction Likedislike(_ref) {\n  let {\n    content_id,\n    review_id,\n    owner_id\n  } = _ref;\n  const [likecnt, setlikecnt] = useState(0);\n  const [Dislikecnt, setDislikecnt] = useState(1); //   let ownerchk ;\n  //const loginID = owner_id;\n  //  const loginID = \"testid\";\n\n  const loginID = \"sohan99\";\n  useEffect(async () => {\n    async function fetchData() {\n      console.log('content_id : ' + content_id + '  review_id :' + review_id + '  owner_id :' + owner_id);\n      axios.post('https://vrkj60roca.execute-api.ap-northeast-2.amazonaws.com/Production', {\n        \"target\": \"getlike\",\n        \"content_id\": content_id,\n        \"review_id\": review_id\n      }).then(response => {\n        const res = JSON.parse(response.data.body);\n\n        if (response.data.statusCode == 200 && res.length > 0) {\n          setlikecnt(likecnt => 0);\n          setDislikecnt(Dislikecnt => 0);\n          var key;\n\n          for (key in res) {\n            if (res[key].yn_like == true) {\n              console.log(\"like : \" + res[key].CNT);\n              setlikecnt(likecnt => res[key].CNT);\n            } else {\n              console.log(\"dislike : \" + res[key].CNT);\n              setDislikecnt(Dislikecnt => res[key].CNT);\n            }\n          }\n        }\n\n        axios.post('https://vrkj60roca.execute-api.ap-northeast-2.amazonaws.com/Production', {\n          \"target\": \"ownerlist\",\n          \"content_id\": content_id,\n          \"review_id\": review_id\n        }).then(response => {\n          ownerchk = JSON.parse(response.data.body).filter(function (e) {\n            return e.owner_id == loginID;\n          }).length;\n          console.log(\"review_id like owner chk no. : \" + ownerchk);\n        }).catch(error => {\n          console.log(error);\n        });\n      }).catch(error => {\n        console.log(error.response);\n        setlikecnt(likecnt => 0);\n        setDislikecnt(Dislikecnt => 0);\n      });\n    }\n\n    fetchData();\n  }, []);\n\n  const likeadd = () => {\n    console.log('like add loginID:' + loginID + \" owner_id: \" + owner_id + \" ownerchk: \" + ownerchk);\n\n    if (loginID == owner_id) {\n      alert('내 리뷰에 내가 좋아요는 못합니다.!');\n    } else if (ownerchk > 0) {\n      alert('좋아요 혹은 싫어요를 이미 선택했습니다.');\n    } else {\n      setlikecnt(likecnt => likecnt + 1);\n    }\n  };\n\n  const Dislikeadd = () => {\n    console.log('Dislike add loginID:' + loginID + \" owner_id: \" + owner_id + \" ownerchk: \" + ownerchk);\n\n    if (loginID == owner_id) {\n      alert('내 리뷰에 내가 싫어요는 못합니다.!');\n    } else if (ownerchk > 0) {\n      alert('좋아요 혹은 싫어요를 이미 선택했습니다.');\n    } else {\n      setDislikecnt(Dislikecnt => Dislikecnt + 1);\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"likedislike\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 9\n    }\n  }, \" \", review_id, \" / \", loginID, \" / \", ownerchk, /*#__PURE__*/React.createElement(\"img\", {\n    src: \"./assets/iconmonstr-thumb-14.svg\",\n    alt: \"like\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: likeadd,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 70\n    }\n  }, likecnt), /*#__PURE__*/React.createElement(\"img\", {\n    src: \"./assets/iconmonstr-thumb-20.svg\",\n    alt: \"dislkie\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: Dislikeadd,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 73\n    }\n  }, Dislikecnt));\n}\n\nLikedislike.propTypes = {\n  content_id: PropTypes.string.isRequired,\n  review_id: PropTypes.number.isRequired,\n  owner_id: PropTypes.string.isRequired\n};\nexport default Likedislike;","map":{"version":3,"names":["React","useState","useEffect","axios","PropTypes","useLayoutEffect","ownerchk","Likedislike","content_id","review_id","owner_id","likecnt","setlikecnt","Dislikecnt","setDislikecnt","loginID","fetchData","console","log","post","then","response","res","JSON","parse","data","body","statusCode","length","key","yn_like","CNT","filter","e","catch","error","likeadd","alert","Dislikeadd","propTypes","string","isRequired","number"],"sources":["C:/Users/User/Documents/clone-starter-kit-08/src/components/Likedislike.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport './Review.css';\r\nimport axios from 'axios';\r\nimport PropTypes from 'prop-types';\r\nimport { useLayoutEffect } from 'react';\r\n\r\nlet ownerchk;\r\n\r\nfunction Likedislike({content_id, review_id, owner_id}) {\r\n   \r\n    const [likecnt, setlikecnt] = useState(0);\r\n    const [Dislikecnt, setDislikecnt] = useState(1);\r\n  //   let ownerchk ;\r\n\r\n    //const loginID = owner_id;\r\n   //  const loginID = \"testid\";\r\n    const loginID = \"sohan99\";\r\n\r\n     useEffect(async () => {\r\n         async function fetchData () {\r\n\r\n             console.log('content_id : ' + content_id + '  review_id :' + review_id + '  owner_id :' + owner_id);\r\n\r\n            axios.post('https://vrkj60roca.execute-api.ap-northeast-2.amazonaws.com/Production',\r\n                 {\r\n                     \"target\": \"getlike\",\r\n                     \"content_id\": content_id,\r\n                     \"review_id\": review_id\r\n                 })\r\n                 .then((response) => {\r\n\r\n                     const res = JSON.parse(response.data.body);\r\n\r\n                     if (response.data.statusCode == 200 && res.length > 0) {\r\n                         setlikecnt(likecnt => 0);\r\n                         setDislikecnt(Dislikecnt => 0);\r\n                         var key;\r\n                         for (key in res) {\r\n                             if (res[key].yn_like == true) {\r\n                                 console.log(\"like : \" + res[key].CNT);\r\n                                 setlikecnt(likecnt => res[key].CNT);\r\n                             }\r\n                             else {\r\n                                 console.log(\"dislike : \" + res[key].CNT);\r\n                                 setDislikecnt(Dislikecnt => res[key].CNT);\r\n                             }\r\n\r\n                         }\r\n                     }\r\n\r\n                    axios.post('https://vrkj60roca.execute-api.ap-northeast-2.amazonaws.com/Production',\r\n                         {\r\n                             \"target\": \"ownerlist\",\r\n                             \"content_id\": content_id,\r\n                             \"review_id\": review_id\r\n                         }) \r\n                    .then((response)=> {\r\n                        \r\n                        ownerchk = JSON.parse(response.data.body).filter(function (e) { return e.owner_id == loginID }).length;\r\n                        console.log(\"review_id like owner chk no. : \" + ownerchk);\r\n                        \r\n                    })\r\n                    .catch((error) => {console.log(error);})                    \r\n                 })\r\n                 .catch((error) => {\r\n                     console.log(error.response);\r\n                     setlikecnt(likecnt => 0);\r\n                     setDislikecnt(Dislikecnt => 0);\r\n                 });\r\n         }\r\n\r\n         fetchData();\r\n\r\n    }, []);\r\n\r\n    const likeadd = () => {\r\n        console.log('like add loginID:' + loginID + \" owner_id: \" + owner_id + \" ownerchk: \" + ownerchk );\r\n        if (loginID == owner_id ) {\r\n            alert('내 리뷰에 내가 좋아요는 못합니다.!')\r\n        } \r\n        else if (ownerchk > 0) {\r\n            alert('좋아요 혹은 싫어요를 이미 선택했습니다.')\r\n        }\r\n        else {\r\n            setlikecnt(likecnt => likecnt + 1);\r\n        }\r\n    }\r\n\r\n    const Dislikeadd = () => {\r\n        console.log('Dislike add loginID:' + loginID + \" owner_id: \" + owner_id + \" ownerchk: \" + ownerchk);\r\n        if (loginID == owner_id) {\r\n            alert('내 리뷰에 내가 싫어요는 못합니다.!')\r\n        }\r\n        else if (ownerchk > 0) {\r\n            alert('좋아요 혹은 싫어요를 이미 선택했습니다.')\r\n        }\r\n        else {\r\n            setDislikecnt(Dislikecnt => Dislikecnt + 1);\r\n        }\r\n        \r\n    }\r\n\r\n    return (\r\n        <div className = \"likedislike\" > {review_id} / {loginID} / {ownerchk}\r\n            <img src=\"./assets/iconmonstr-thumb-14.svg\" alt=\"like\" /><button onClick={likeadd}>{likecnt}</button>  \r\n            <img src=\"./assets/iconmonstr-thumb-20.svg\" alt=\"dislkie\" /><button onClick={Dislikeadd}>{Dislikecnt}</button>\r\n        </div>\r\n    );\r\n}\r\n\r\nLikedislike.propTypes = {\r\n    content_id: PropTypes.string.isRequired,\r\n    review_id: PropTypes.number.isRequired,\r\n    owner_id: PropTypes.string.isRequired\r\n};\r\n\r\nexport default Likedislike; "],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,OAAO,cAAP;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,SAAP,MAAsB,YAAtB;AACA,SAASC,eAAT,QAAgC,OAAhC;AAEA,IAAIC,QAAJ;;AAEA,SAASC,WAAT,OAAwD;EAAA,IAAnC;IAACC,UAAD;IAAaC,SAAb;IAAwBC;EAAxB,CAAmC;EAEpD,MAAM,CAACC,OAAD,EAAUC,UAAV,IAAwBX,QAAQ,CAAC,CAAD,CAAtC;EACA,MAAM,CAACY,UAAD,EAAaC,aAAb,IAA8Bb,QAAQ,CAAC,CAAD,CAA5C,CAHoD,CAItD;EAEE;EACD;;EACC,MAAMc,OAAO,GAAG,SAAhB;EAECb,SAAS,CAAC,YAAY;IAClB,eAAec,SAAf,GAA4B;MAExBC,OAAO,CAACC,GAAR,CAAY,kBAAkBV,UAAlB,GAA+B,eAA/B,GAAiDC,SAAjD,GAA6D,cAA7D,GAA8EC,QAA1F;MAEDP,KAAK,CAACgB,IAAN,CAAW,wEAAX,EACK;QACI,UAAU,SADd;QAEI,cAAcX,UAFlB;QAGI,aAAaC;MAHjB,CADL,EAMMW,IANN,CAMYC,QAAD,IAAc;QAEhB,MAAMC,GAAG,GAAGC,IAAI,CAACC,KAAL,CAAWH,QAAQ,CAACI,IAAT,CAAcC,IAAzB,CAAZ;;QAEA,IAAIL,QAAQ,CAACI,IAAT,CAAcE,UAAd,IAA4B,GAA5B,IAAmCL,GAAG,CAACM,MAAJ,GAAa,CAApD,EAAuD;UACnDhB,UAAU,CAACD,OAAO,IAAI,CAAZ,CAAV;UACAG,aAAa,CAACD,UAAU,IAAI,CAAf,CAAb;UACA,IAAIgB,GAAJ;;UACA,KAAKA,GAAL,IAAYP,GAAZ,EAAiB;YACb,IAAIA,GAAG,CAACO,GAAD,CAAH,CAASC,OAAT,IAAoB,IAAxB,EAA8B;cAC1Bb,OAAO,CAACC,GAAR,CAAY,YAAYI,GAAG,CAACO,GAAD,CAAH,CAASE,GAAjC;cACAnB,UAAU,CAACD,OAAO,IAAIW,GAAG,CAACO,GAAD,CAAH,CAASE,GAArB,CAAV;YACH,CAHD,MAIK;cACDd,OAAO,CAACC,GAAR,CAAY,eAAeI,GAAG,CAACO,GAAD,CAAH,CAASE,GAApC;cACAjB,aAAa,CAACD,UAAU,IAAIS,GAAG,CAACO,GAAD,CAAH,CAASE,GAAxB,CAAb;YACH;UAEJ;QACJ;;QAEF5B,KAAK,CAACgB,IAAN,CAAW,wEAAX,EACK;UACI,UAAU,WADd;UAEI,cAAcX,UAFlB;UAGI,aAAaC;QAHjB,CADL,EAMCW,IAND,CAMOC,QAAD,IAAa;UAEff,QAAQ,GAAGiB,IAAI,CAACC,KAAL,CAAWH,QAAQ,CAACI,IAAT,CAAcC,IAAzB,EAA+BM,MAA/B,CAAsC,UAAUC,CAAV,EAAa;YAAE,OAAOA,CAAC,CAACvB,QAAF,IAAcK,OAArB;UAA8B,CAAnF,EAAqFa,MAAhG;UACAX,OAAO,CAACC,GAAR,CAAY,oCAAoCZ,QAAhD;QAEH,CAXD,EAYC4B,KAZD,CAYQC,KAAD,IAAW;UAAClB,OAAO,CAACC,GAAR,CAAYiB,KAAZ;QAAoB,CAZvC;MAaF,CAxCN,EAyCMD,KAzCN,CAyCaC,KAAD,IAAW;QACdlB,OAAO,CAACC,GAAR,CAAYiB,KAAK,CAACd,QAAlB;QACAT,UAAU,CAACD,OAAO,IAAI,CAAZ,CAAV;QACAG,aAAa,CAACD,UAAU,IAAI,CAAf,CAAb;MACH,CA7CN;IA8CF;;IAEDG,SAAS;EAEb,CAvDS,EAuDP,EAvDO,CAAT;;EAyDD,MAAMoB,OAAO,GAAG,MAAM;IAClBnB,OAAO,CAACC,GAAR,CAAY,sBAAsBH,OAAtB,GAAgC,aAAhC,GAAgDL,QAAhD,GAA2D,aAA3D,GAA2EJ,QAAvF;;IACA,IAAIS,OAAO,IAAIL,QAAf,EAA0B;MACtB2B,KAAK,CAAC,sBAAD,CAAL;IACH,CAFD,MAGK,IAAI/B,QAAQ,GAAG,CAAf,EAAkB;MACnB+B,KAAK,CAAC,wBAAD,CAAL;IACH,CAFI,MAGA;MACDzB,UAAU,CAACD,OAAO,IAAIA,OAAO,GAAG,CAAtB,CAAV;IACH;EACJ,CAXD;;EAaA,MAAM2B,UAAU,GAAG,MAAM;IACrBrB,OAAO,CAACC,GAAR,CAAY,yBAAyBH,OAAzB,GAAmC,aAAnC,GAAmDL,QAAnD,GAA8D,aAA9D,GAA8EJ,QAA1F;;IACA,IAAIS,OAAO,IAAIL,QAAf,EAAyB;MACrB2B,KAAK,CAAC,sBAAD,CAAL;IACH,CAFD,MAGK,IAAI/B,QAAQ,GAAG,CAAf,EAAkB;MACnB+B,KAAK,CAAC,wBAAD,CAAL;IACH,CAFI,MAGA;MACDvB,aAAa,CAACD,UAAU,IAAIA,UAAU,GAAG,CAA5B,CAAb;IACH;EAEJ,CAZD;;EAcA,oBACI;IAAK,SAAS,EAAG,aAAjB;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,QAAkCJ,SAAlC,SAAgDM,OAAhD,SAA4DT,QAA5D,eACI;IAAK,GAAG,EAAC,kCAAT;IAA4C,GAAG,EAAC,MAAhD;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,EADJ,eAC6D;IAAQ,OAAO,EAAE8B,OAAjB;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,GAA2BzB,OAA3B,CAD7D,eAEI;IAAK,GAAG,EAAC,kCAAT;IAA4C,GAAG,EAAC,SAAhD;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,EAFJ,eAEgE;IAAQ,OAAO,EAAE2B,UAAjB;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,GAA8BzB,UAA9B,CAFhE,CADJ;AAMH;;AAEDN,WAAW,CAACgC,SAAZ,GAAwB;EACpB/B,UAAU,EAAEJ,SAAS,CAACoC,MAAV,CAAiBC,UADT;EAEpBhC,SAAS,EAAEL,SAAS,CAACsC,MAAV,CAAiBD,UAFR;EAGpB/B,QAAQ,EAAEN,SAAS,CAACoC,MAAV,CAAiBC;AAHP,CAAxB;AAMA,eAAelC,WAAf"},"metadata":{},"sourceType":"module"}